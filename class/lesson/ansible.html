

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Try Ansible Basic on FutureSystems &mdash; my Cloudmesh Learning documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="../../about.html"/>
    <link rel="top" title="my Cloudmesh Learning documentation" href="../../index.html"/>
        <link rel="up" title="Spring 2015 - Big Data Applications and Technologies (INFO-I 400, INFO-I 590)" href="../vc2_sp15/index.html"/>
        <link rel="next" title="Writing Ansible Playbooks on FutureSystems" href="ansible_cloudmesh.html"/>
        <link rel="prev" title="Deploying IPython Notebook Cluster with Cloudmesh launcher" href="ipynb.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../index.html" class="fa fa-home"> my Cloudmesh</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../preface.html">Preface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../preface.html#conventions">Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../preface.html#using-the-notebooks">Using the Notebooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../about.html#independent-study-at-iu">Independent Study at IU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about.html#student-employment-at-iu">Student Employment at IU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about.html#contributing-to-the-manual">Contributing to the Manual</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contact.html#contributors">Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contact.html#support">Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources from the Internet</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Cloudmesh in Classes</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../lessons.html">Lessons</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../vc2_sp15/index.html">Spring 2015 - Big Data Applications and Technologies (<tt class="docutils literal"><span class="pre">INFO-I</span> <span class="pre">400</span></tt>, <tt class="docutils literal"><span class="pre">INFO-I</span> <span class="pre">590</span></tt>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vc_sp15/index.html">Spring 2015 - Big Data Open Source Overview (<tt class="docutils literal"><span class="pre">BUEX-V</span> <span class="pre">594</span></tt>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../i590.html">Fall 2014 - Big Data Opensource Software and Projects (<tt class="docutils literal"><span class="pre">Info</span> <span class="pre">I590</span></tt>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cm-mooc/index.html">Cloudmesh MOOC Shell</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../accounts/index.html">Cloud Accounts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../accounts/accounts.html">Creating FutureSystems Accounts and Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../accounts/details.html">Account and Project Management</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../cloudmesh/index.html">Cloudmesh</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cloudmesh/overview.html">Cloudmesh Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cloudmesh/setup/index.html">Cloudmesh Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cloudmesh/cm/index.html">Cloudmesh cm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cloudmesh/api/index.html">Cloudmesh API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cloudmesh/shell/index.html">Cloudmesh Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cloudmesh/gui/index.html">Cloudmesh GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cloudmesh/faq.html">Cloudmesh FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../parallel.html">Parallel Shell</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../parallel.html#parallel-distributed-shell-pdsh">Parallel Distributed Shell (pdsh)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../parallel.html#fabric">Fabric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../parallel.html#cloudmesh-parallel-api">Cloudmesh Parallel API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../parallel.html#exercises">Exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../iaas/index.html">IaaS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../iaas/index.html#openstack-clouds">OpenStack Clouds</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../paas/index.html">PaaS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../paas/hadoop.html">Using Hadoop in FutureSystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../paas/hadoop-setup.html">Deploying a Hadoop Cluster on India OpenStack</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc/index.html">HPC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../hpc/hpc.html">HPC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/index.html">Hardware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/indiana.html">Hardware at Indiana University</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../devops/index.html">DevOps</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../devops/history.html">Historical and Functionality Perspective</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../devops/makefile.html">Makefile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../devops/shell.html">Shell Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../devops/configure.html">Configure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../devops/rpm.html">Package Managers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ipython/index.html">IPython</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../ipython/_ipython.html">IPython</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../rst.html">reStructuredText</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../rst.html#sections">Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rst.html#listtable">Listtable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rst.html#exceltable">Exceltable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rst.html#boxes">Boxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rst.html#sidebar-directive">Sidebar directive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rst.html#autorun">Autorun</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rst.html#hyperlinks">Hyperlinks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rst.html#todo">Todo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../management/index.html">Create Cloudmesh Development Image</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../management/create_image.html">How to setup a Cloudmesh Image</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribute to Cloudmesh</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contribute/python-programming-style.html">How to write good Python codes for Cloudmesh</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../todo.html">ToDos</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">my Cloudmesh</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Cloudmesh in Classes</a> &raquo;</li>
      
          <li><a href="../vc2_sp15/index.html">Spring 2015 - Big Data Applications and Technologies (<tt class="docutils literal"><span class="pre">INFO-I</span> <span class="pre">400</span></tt>, <tt class="docutils literal"><span class="pre">INFO-I</span> <span class="pre">590</span></tt>)</a> &raquo;</li>
      
    <li>Try Ansible Basic on FutureSystems</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../_sources/class/lesson/ansible.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="try-ansible-basic-on-futuresystems">
<h1>Try Ansible Basic on FutureSystems<a class="headerlink" href="#try-ansible-basic-on-futuresystems" title="Permalink to this headline">¶</a></h1>
<p>Ansible is an IT automation tool which deploys software and configures systems
on multiple servers using SSH protocol. Python based Ansible stores information
about deployment and configuration in a yaml format file, named Ansible
Playbook. Tasks defined in the playbook allows you to have identical
configurations and software across multiple machines in your infrastructure.
This section, we introduce basic commands of <tt class="docutils literal"><span class="pre">ansible</span></tt> to introduce Ansible
software on FutureSystems.  In the next section, we will explore advanced use
of <tt class="docutils literal"><span class="pre">ansible</span></tt> on FutureSystems.</p>
<div class="section" id="tutorial-ansible-basic-commands">
<h2>Tutorial: Ansible Basic commands<a class="headerlink" href="#tutorial-ansible-basic-commands" title="Permalink to this headline">¶</a></h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">approximate time 45 minutes</p>
</div>
<p>In this tutorial, we are going to learn basic commands of Ansible software.
Keep in mind that <tt class="docutils literal"><span class="pre">ansible</span></tt> is a main program and <tt class="docutils literal"><span class="pre">playbook</span></tt> is a template
that you would like to use. You may have several playbooks in your Ansible.</p>
<div class="section" id="install-ansible">
<h3>Install Ansible<a class="headerlink" href="#install-ansible" title="Permalink to this headline">¶</a></h3>
<p>Ansible has two types of servers: a control machine and a managed node.
Typically, a single control machine executes tasks over the one or more nodes.</p>
<div class="section" id="control-machine">
<h4>Control machine<a class="headerlink" href="#control-machine" title="Permalink to this headline">¶</a></h4>
<p>Let&#8217;s install Ansible from Git.</p>
<div class="highlight-python"><div class="highlight"><pre>sudo apt-get update
sudo apt-get install git
git clone git://github.com/ansible/ansible.git --recursive
cd ./ansible
source ./hacking/env-setup
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">You can also install ansible using apt-get:
sudo apt-get install software-properties-common
sudo apt-add-repository ppa:ansible/ansible
sudo apt-get update
sudo apt-get install ansible</p>
</div>
</div>
<div class="section" id="python-pypi">
<h4>Python PyPI<a class="headerlink" href="#python-pypi" title="Permalink to this headline">¶</a></h4>
<p>You need to install python-pip:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo apt-get install python-pip python-dev
</pre></div>
</div>
</div>
<div class="section" id="python-packages">
<h4>Python Packages<a class="headerlink" href="#python-packages" title="Permalink to this headline">¶</a></h4>
<p>Four python packages are required:</p>
<ul class="simple">
<li>paramiko</li>
<li>PyYAML</li>
<li>Jinja2</li>
<li>httplib2</li>
</ul>
<p>Install these packages:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo pip install paramiko PyYAML Jinja2 httplib2
</pre></div>
</div>
</div>
</div>
<div class="section" id="ssh-configuration">
<h3>SSH Configuration<a class="headerlink" href="#ssh-configuration" title="Permalink to this headline">¶</a></h3>
<p>Since Ansible works with SSH, you need to make sure your node(s) are accessible by your control machine.</p>
<div class="section" id="keypair-creation">
<h4>KeyPair Creation<a class="headerlink" href="#keypair-creation" title="Permalink to this headline">¶</a></h4>
<p>With <tt class="docutils literal"><span class="pre">ssh-keygen</span></tt> command, we create a default key without a password.</p>
<div class="highlight-python"><div class="highlight"><pre>ssh-keygen -b 2048 -t rsa -f ~/.ssh/id_rsa -q -N &quot;&quot;
</pre></div>
</div>
</div>
<div class="section" id="authorized-keys">
<h4>authorized_keys<a class="headerlink" href="#authorized-keys" title="Permalink to this headline">¶</a></h4>
<p>Register the public key to <tt class="docutils literal"><span class="pre">authorized_keys</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre>cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys
</pre></div>
</div>
<p>This public key will be registered on each node for your Ansible.</p>
</div>
<div class="section" id="node-registration">
<h4>Node registration<a class="headerlink" href="#node-registration" title="Permalink to this headline">¶</a></h4>
<p>How many nodes do you have? In this section, we define hosts for Ansible.
The default location is in <tt class="docutils literal"><span class="pre">/etc/ansible/hosts</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre>sudo mkdir /etc/ansible
</pre></div>
</div>
<p>Now, register your hosts in the <tt class="docutils literal"><span class="pre">/etc/ansible/hosts</span></tt> default file. Your hosts
file looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre>cat /etc/ansible/hosts

[local]
10.39.1.1
10.39.1.2
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You need to make sure you can ssh to each of these nodes (i.e.
10.39.1.1, 10.39.1.2)</p>
</div>
<p>We added two hosts (10.39.1.1, 10.39.1.2) in the <tt class="docutils literal"><span class="pre">local</span></tt> group.</p>
</div>
</div>
<div class="section" id="test-ansible">
<h3>Test Ansible<a class="headerlink" href="#test-ansible" title="Permalink to this headline">¶</a></h3>
<p>Let&#8217;s try to run &#8216;echo Hello World&#8217; over the nodes.</p>
<div class="highlight-python"><div class="highlight"><pre>ansible all -a &quot;echo Hello World&quot;
</pre></div>
</div>
<p>You expect to see:</p>
<div class="highlight-python"><div class="highlight"><pre>10.39.1.1 | success | rc=0 &gt;&gt;
Hello World

10.39.1.2 | success | rc=0 &gt;&gt;
Hello World
</pre></div>
</div>
<p>Run a simple command &#8220;ping&#8221;.</p>
<div class="highlight-python"><div class="highlight"><pre>ansible all -m ping
</pre></div>
</div>
<p>You expect to see:</p>
<div class="highlight-python"><div class="highlight"><pre>10.39.1.1 | success &gt;&gt; {
    &quot;changed&quot;: false,
    &quot;ping&quot;: &quot;pong&quot;
}

10.39.1.2 | success &gt;&gt; {
    &quot;changed&quot;: false,
    &quot;ping&quot;: &quot;pong&quot;
}
</pre></div>
</div>
</div>
<div class="section" id="terms">
<h3>Terms<a class="headerlink" href="#terms" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Inventory: The hosts registered in the <tt class="docutils literal"><span class="pre">/etc/ansible/hosts</span></tt> file. Multiple
inventories can be used.</li>
<li>Group: A representation of a list of hosts. <tt class="docutils literal"><span class="pre">[group</span> <span class="pre">name]</span></tt> used in the
inventory.</li>
<li>Playbook: a list of tasks for Ansible nodes. YAML format used.</li>
</ul>
</div>
<div class="section" id="more-examples">
<h3>More examples<a class="headerlink" href="#more-examples" title="Permalink to this headline">¶</a></h3>
<p>You can find more examples from here: <a class="reference external" href="https://github.com/ansible/ansible-examples">https://github.com/ansible/ansible-examples</a></p>
</div>
<div class="section" id="reference">
<h3>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h3>
<p>The main tutorial from Ansible is here: <a class="reference external" href="https://docs.ansible.com/installation/ubuntulinux/">https://docs.ansible.com/installation/ubuntulinux/</a></p>
</div>
</div>
<div class="section" id="next-step">
<h2>Next Step<a class="headerlink" href="#next-step" title="Permalink to this headline">¶</a></h2>
<p>In the next page, we learn Ansible Playbook on FutureSystems.</p>
<p><a class="reference external" href="ansible_cloudmesh.html">Writing Ansible Playbook for Cloudmesh</a></p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ansible_cloudmesh.html" class="btn btn-neutral float-right" title="Writing Ansible Playbooks on FutureSystems"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ipynb.html" class="btn btn-neutral" title="Deploying IPython Notebook Cluster with Cloudmesh launcher"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, myCloudmesh.org/learning.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'Learning',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>