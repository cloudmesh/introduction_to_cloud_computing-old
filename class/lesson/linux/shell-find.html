

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Learning Objectives &mdash; my Cloudmesh Learning documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="../../../about.html"/>
    <link rel="top" title="my Cloudmesh Learning documentation" href="../../../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../../index.html" class="fa fa-home"> my Cloudmesh</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../preface.html">Preface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../preface.html#conventions">Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../preface.html#using-the-notebooks">Using the Notebooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../about.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../about.html#independent-study-at-iu">Independent Study at IU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about.html#student-employment-at-iu">Student Employment at IU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about.html#contributing-to-the-manual">Contributing to the Manual</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../contact.html">Contact</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../contact.html#contributors">Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../contact.html#support">Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../resources.html">Resources from the Internet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Cloudmesh in Classes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../lessons.html">Lessons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bdosp_sp15/index.html"> Spring 2015 - Big Data Open Source Software Project (BUEX-V 594)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../vc_sp15/index.html">Spring 2015 - Big Data Applications to Clouds and HPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i590.html">Fall 2014 - Big Data Opensource Software and Projects (<tt class="docutils literal"><span class="pre">Info</span> <span class="pre">I590</span></tt>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cm-mooc/index.html">Cloudmesh MOOC Shell</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../accounts/index.html">Cloud Accounts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../accounts/accounts.html">Creating FutureSystems Accounts and Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../accounts/details.html">Account and Project Management</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../cloudmesh/index.html">Cloudmesh</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../cloudmesh/overview.html">Cloudmesh Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cloudmesh/setup/index.html">Cloudmesh Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cloudmesh/cm/index.html">Cloudmesh cm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cloudmesh/api/index.html">Cloudmesh API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cloudmesh/shell/index.html">Cloudmesh Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cloudmesh/gui/index.html">Cloudmesh GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cloudmesh/faq.html">Cloudmesh FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../parallel.html">Parallel Shell</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../parallel.html#parallel-distributed-shell-pdsh">Parallel Distributed Shell (pdsh)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../parallel.html#fabric">Fabric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../parallel.html#cloudmesh-parallel-api">Cloudmesh Parallel API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../parallel.html#exercises">Exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../iaas/index.html">IaaS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../iaas/index.html#openstack-clouds">OpenStack Clouds</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../paas/index.html">PaaS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../paas/hadoop.html">Using Hadoop in FutureSystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../paas/hadoop-setup.html">Deploying a Hadoop Cluster on India OpenStack</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../hpc/index.html">HPC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../hpc/hpc.html">HPC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/index.html">Hardware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/indiana.html">Hardware at Indiana University</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../devops/index.html">DevOps</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../devops/history.html">Historical and Functionality Perspective</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../devops/makefile.html">Makefile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../devops/shell.html">Shell Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../devops/configure.html">Configure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../devops/rpm.html">Package Managers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../ipython/index.html">IPython</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../ipython/_ipython.html">IPython</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../rst.html">reStructuredText</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../rst.html#sections">Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rst.html#listtable">Listtable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rst.html#exceltable">Exceltable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rst.html#boxes">Boxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rst.html#sidebar-directive">Sidebar directive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rst.html#autorun">Autorun</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rst.html#hyperlinks">Hyperlinks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rst.html#todo">Todo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../management/index.html">Create Cloudmesh Development Image</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../management/create_image.html">How to setup a Cloudmesh Image</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contribute to Cloudmesh</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../contribute/python-programming-style.html">How to write good Python codes for Cloudmesh</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../todo.html">ToDos</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">my Cloudmesh</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
    <li>Learning Objectives</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../../_sources/class/lesson/linux/shell-find.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="learning-objectives">
<h1>Learning Objectives<a class="headerlink" href="#learning-objectives" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><ul class="simple">
<li>Use <tt class="docutils literal"><span class="pre">grep</span></tt> to select lines from text files that match simple
patterns.</li>
<li>Use <tt class="docutils literal"><span class="pre">find</span></tt> to find files whose names match simple patterns.</li>
<li>Use the output of one command as the command-line parameters to
another command.</li>
<li>Explain what is meant by &#8220;text&#8221; and &#8220;binary&#8221; files, and why many
common tools don&#8217;t handle the latter well.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="searching-file-contents">
<h1>Searching File Contents<a class="headerlink" href="#searching-file-contents" title="Permalink to this headline">¶</a></h1>
<p>You can guess someone&#8217;s age by how they talk about search: young
people use &#8220;Google&#8221; as a verb, while crusty old Unix programmers use
&#8220;grep&#8221;.  The word is a contraction of &#8220;global/regular
expression/print&#8221;, a common sequence of operations in early Unix text
editors. It is also the name of a very useful command-line program.</p>
<p><tt class="docutils literal"><span class="pre">grep</span></tt> finds and prints lines in files that match a pattern. For our
examples, we will use a file that contains three haiku taken from a
1998 competition in <em>Salon</em> magazine. For this set of examples we&#8217;re
going to be working in the writing subdirectory:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd
$ cd writing
$ cat haiku.txt
The Tao that is seen
Is not the true Tao, until
You bring fresh toner.

With searching comes loss
and the presence of absence:
&quot;My Thesis&quot; not found.

Yesterday it worked
Today it is not working
Software is like that.
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>Forever, or Five Years</dt>
<dd>We haven&#8217;t linked to the original haiku because they don&#8217;t appear
to be on <em>Salon</em>&#8216;s site any longer. As <a class="reference external" href="http://www.clir.org/pubs/archives/ensuring.pdf">Jeff Rothenberg said</a>, &#8220;Digital
information lasts forever &#8212; or five years, whichever comes
first.&#8221;</dd>
</dl>
</div>
<p>Let&#8217;s find lines that contain the word &#8220;not&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre>$ grep not haiku.txt
Is not the true Tao, until
&quot;My Thesis&quot; not found
Today it is not working
</pre></div>
</div>
<p>Here, <tt class="docutils literal"><span class="pre">not</span></tt> is the pattern we&#8217;re searching for. It&#8217;s pretty simple:
every alphanumeric character matches against itself. After the pattern
comes the name or names of the files we&#8217;re searching in. The output is
the three lines in the file that contain the letters &#8220;not&#8221;.</p>
<p>Let&#8217;s try a different pattern: &#8220;day&#8221;.:</p>
<div class="highlight-python"><div class="highlight"><pre>$ grep day haiku.txt
Yesterday it worked
Today it is not working
</pre></div>
</div>
<p>This time, two lines that include the letters &#8220;day&#8221; are outputted.
However, these letters are contained within larger words. To restrict
matches to lines containing the word &#8220;day&#8221; on its own, we can give
<tt class="docutils literal"><span class="pre">grep</span></tt> with the <tt class="docutils literal"><span class="pre">-w</span></tt> flag. This will limit matches to word
boundaries.:</p>
<div class="highlight-python"><div class="highlight"><pre>$ grep -w day haiku.txt
</pre></div>
</div>
<p>In this case, there aren&#8217;t any, so <tt class="docutils literal"><span class="pre">grep</span></tt>&#8216;s output is empty.</p>
<p>Another useful option is <tt class="docutils literal"><span class="pre">-n</span></tt>, which numbers the lines that match:</p>
<div class="highlight-python"><div class="highlight"><pre>$ grep -n it haiku.txt
5:With searching comes loss
9:Yesterday it worked
10:Today it is not working
</pre></div>
</div>
<p>Here, we can see that lines 5, 9, and 10 contain the letters &#8220;it&#8221;.</p>
<p>We can combine flags as we do with other Unix commands. For example,
since <tt class="docutils literal"><span class="pre">-i</span></tt> makes matching case-insensitive and <tt class="docutils literal"><span class="pre">-v</span></tt> inverts the
match, using them both only prints lines that <em>don&#8217;t</em> match the
pattern in any mix of upper and lower case:</p>
<div class="highlight-python"><div class="highlight"><pre>$ grep -i -v the haiku.txt
You bring fresh toner.

With searching comes loss

Yesterday it worked
Today it is not working
Software is like that.
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">grep</span></tt> has lots of other options. To find out what they are, we can
type <tt class="docutils literal"><span class="pre">man</span> <span class="pre">grep</span></tt>. <tt class="docutils literal"><span class="pre">man</span></tt> is the Unix &#8220;manual&#8221; command: it prints a
description of a command and its options, and (if you&#8217;re lucky)
provides a few examples of how to use it.</p>
<p>To navigate through the <tt class="docutils literal"><span class="pre">man</span></tt> pages, you may use the up and down
arrow keys to move line-by-line, or try the &#8220;b&#8221; and spacebar keys to
skip up and down by full page. Quit the <tt class="docutils literal"><span class="pre">man</span></tt> pages by typing &#8220;q&#8221;.:</p>
<div class="highlight-python"><div class="highlight"><pre>$ man grep
GREP(1)                                                                                              GREP(1)

NAME
grep, egrep, fgrep - print lines matching a pattern

SYNOPSIS
grep [OPTIONS] PATTERN [FILE...]
grep [OPTIONS] [-e PATTERN | -f FILE] [FILE...]

DESCRIPTION
grep  searches the named input FILEs (or standard input if no files are named, or if a single hyphen-
minus (-) is given as file name) for lines containing a match to the given PATTERN.  By default, grep
prints the matching lines.
...        ...        ...

OPTIONS
Generic Program Information
--help Print  a  usage  message  briefly summarizing these command-line options and the bug-reporting
address, then exit.

-V, --version
Print the version number of grep to the standard output stream.  This version number should be
included in all bug reports (see below).

Matcher Selection
-E, --extended-regexp
Interpret  PATTERN  as  an  extended regular expression (ERE, see below).  (-E is specified by
POSIX.)

-F, --fixed-strings
Interpret PATTERN as a list of fixed strings, separated by newlines, any of  which  is  to  be
matched.  (-F is specified by POSIX.)
...        ...        ...
</pre></div>
</div>
</div>
<div class="section" id="searching-for-patterns-in-files">
<h1>Searching for Patterns in Files<a class="headerlink" href="#searching-for-patterns-in-files" title="Permalink to this headline">¶</a></h1>
<p><tt class="docutils literal"><span class="pre">grep</span></tt>&#8216;s real power doesn&#8217;t come from its options, though; it comes
from the fact that patterns can include wildcards. (The technical name
for these is <strong>regular expressions</strong>, which is what the &#8220;re&#8221; in &#8220;grep&#8221;
stands for.) Regular expressions are both complex and powerful; if you
want to do complex searches, please look at the lesson on <a class="reference external" href="http://software-carpentry.org">our website</a>. As a taster, we can find lines
that have an &#8216;o&#8217; in the second position like this:</p>
<div class="highlight-python"><div class="highlight"><pre>$ grep -E &#39;^.o&#39; haiku.txt
You bring fresh toner.
Today it is not working
Software is like that.
</pre></div>
</div>
<p>We use the <tt class="docutils literal"><span class="pre">-E</span></tt> flag and put the pattern in quotes to prevent the
shell from trying to interpret it. (If the pattern contained a &#8216;*&#8217;,
for example, the shell would try to expand it before running
<tt class="docutils literal"><span class="pre">grep</span></tt>.) The &#8216;^&#8217; in the pattern anchors the match to the start of
the line. The &#8216;.&#8217; matches a single character (just like &#8216;?&#8217; in the
shell), while the &#8216;o&#8217; matches an actual &#8216;o&#8217;.</p>
</div>
<div class="section" id="searching-for-files">
<h1>Searching for Files<a class="headerlink" href="#searching-for-files" title="Permalink to this headline">¶</a></h1>
<p>While <tt class="docutils literal"><span class="pre">grep</span></tt> finds lines in files, the <tt class="docutils literal"><span class="pre">find</span></tt> command finds files
themselves. Again, it has a lot of options; to show how the simplest
ones work, we&#8217;ll use the directory tree shown below.</p>
<div class="figure">
<img alt="File Tree for Find Example" src="../../../_images/find-file-tree.svg" /><p class="caption">File Tree for Find Example</p>
</div>
<p>Nelle&#8217;s <tt class="docutils literal"><span class="pre">writing</span></tt> directory contains one file called <tt class="docutils literal"><span class="pre">haiku.txt</span></tt>
and four subdirectories: <tt class="docutils literal"><span class="pre">thesis</span></tt> (which is sadly empty), <tt class="docutils literal"><span class="pre">data</span></tt>
(which contains two files <tt class="docutils literal"><span class="pre">one.txt</span></tt> and <tt class="docutils literal"><span class="pre">two.txt</span></tt>), a <tt class="docutils literal"><span class="pre">tools</span></tt>
directory that contains the programs <tt class="docutils literal"><span class="pre">format</span></tt> and <tt class="docutils literal"><span class="pre">stats</span></tt>, and an
empty subdirectory called <tt class="docutils literal"><span class="pre">old</span></tt>.</p>
<p>For our first command, let&#8217;s run <tt class="docutils literal"><span class="pre">find</span> <span class="pre">.</span> <span class="pre">-type</span> <span class="pre">d</span></tt>. As always, the
<tt class="docutils literal"><span class="pre">.</span></tt> on its own means the current working directory, which is where
we want our search to start; <tt class="docutils literal"><span class="pre">-type</span> <span class="pre">d</span></tt> means &#8220;things that are
directories&#8221;. Sure enough, <tt class="docutils literal"><span class="pre">find</span></tt>&#8216;s output is the names of the five
directories in our little tree (including <tt class="docutils literal"><span class="pre">.</span></tt>):</p>
<div class="highlight-python"><div class="highlight"><pre>$ find . -type d
./
./data
./thesis
./tools
./tools/old
</pre></div>
</div>
<p>If we change <tt class="docutils literal"><span class="pre">-type</span> <span class="pre">d</span></tt> to <tt class="docutils literal"><span class="pre">-type</span> <span class="pre">f</span></tt>, we get a listing of all the
files instead:</p>
<div class="highlight-python"><div class="highlight"><pre>$ find . -type f
./haiku.txt
./tools/stats
./tools/old/oldtool
./tools/format
./thesis/empty-draft.md
./data/one.txt
./data/two.txt
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">find</span></tt> automatically goes into subdirectories, their subdirectories,
and so on to find everything that matches the pattern we&#8217;ve given
it. If we don&#8217;t want it to, we can use <tt class="docutils literal"><span class="pre">-maxdepth</span></tt> to restrict the
depth of search:</p>
<div class="highlight-python"><div class="highlight"><pre>$ find . -maxdepth 1 -type f
./haiku.txt
</pre></div>
</div>
<p>The opposite of <tt class="docutils literal"><span class="pre">-maxdepth</span></tt> is <tt class="docutils literal"><span class="pre">-mindepth</span></tt>, which tells <tt class="docutils literal"><span class="pre">find</span></tt> to
only report things that are at or below a certain depth. <tt class="docutils literal"><span class="pre">-mindepth</span> <span class="pre">2</span></tt>
therefore finds all the files that are two or more levels below us:</p>
<div class="highlight-python"><div class="highlight"><pre>$ find . -mindepth 2 -type f
./data/one.txt
./data/two.txt
./tools/format
./tools/stats
</pre></div>
</div>
</div>
<div class="section" id="searching-for-files-matching-a-pattern">
<h1>Searching for Files Matching a Pattern<a class="headerlink" href="#searching-for-files-matching-a-pattern" title="Permalink to this headline">¶</a></h1>
<p>Now let&#8217;s try matching by name:</p>
<div class="highlight-python"><div class="highlight"><pre>$ find . -name *.txt
./haiku.txt
</pre></div>
</div>
<p>We expected it to find all the text files, but it only prints out
<tt class="docutils literal"><span class="pre">./haiku.txt</span></tt>. The problem is that the shell expands wildcard
characters like <tt class="docutils literal"><span class="pre">*</span></tt> <em>before</em> commands run. Since <tt class="docutils literal"><span class="pre">*.txt</span></tt> in the
current directory expands to <tt class="docutils literal"><span class="pre">haiku.txt</span></tt>, the command we actually
ran was:</p>
<div class="highlight-python"><div class="highlight"><pre>$ find . -name haiku.txt
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">find</span></tt> did what we asked; we just asked for the wrong thing.</p>
<p>To get what we want, let&#8217;s do what we did with <tt class="docutils literal"><span class="pre">grep</span></tt>: put <tt class="docutils literal"><span class="pre">*.txt</span></tt>
in single quotes to prevent the shell from expanding the <tt class="docutils literal"><span class="pre">*</span></tt>
wildcard.  This way, <tt class="docutils literal"><span class="pre">find</span></tt> actually gets the pattern <tt class="docutils literal"><span class="pre">*.txt</span></tt>, not
the expanded filename <tt class="docutils literal"><span class="pre">haiku.txt</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ find . -name &#39;*.txt&#39;
./data/one.txt
./data/two.txt
./haiku.txt
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>Listing vs. Finding</dt>
<dd><tt class="docutils literal"><span class="pre">ls</span></tt> and <tt class="docutils literal"><span class="pre">find</span></tt> can be made to do similar things given the
right options, but under normal circumstances, <tt class="docutils literal"><span class="pre">ls</span></tt> lists
everything it can, while <tt class="docutils literal"><span class="pre">find</span></tt> searches for things with certain
properties and shows them.</dd>
</dl>
</div>
<p>As we said earlier, the command line&#8217;s power lies in combining tools.
We&#8217;ve seen how to do that with pipes; let&#8217;s look at another technique.
As we just saw, <tt class="docutils literal"><span class="pre">find</span> <span class="pre">.</span> <span class="pre">-name</span> <span class="pre">'*.txt'</span></tt> gives us a list of all text
files in or below the current directory. How can we combine that with
<tt class="docutils literal"><span class="pre">wc</span> <span class="pre">-l</span></tt> to count the lines in all those files?</p>
</div>
<div class="section" id="subshell">
<h1>Subshell<a class="headerlink" href="#subshell" title="Permalink to this headline">¶</a></h1>
<p>The simplest way is to put the <tt class="docutils literal"><span class="pre">find</span></tt> command inside <tt class="docutils literal"><span class="pre">$()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ wc -l $(find . -name &#39;*.txt&#39;)
11 ./haiku.txt
300 ./data/two.txt
70 ./data/one.txt
381 total
</pre></div>
</div>
<p>When the shell executes this command, the first thing it does is run
whatever is inside the <tt class="docutils literal"><span class="pre">$()</span></tt>. It then replaces the <tt class="docutils literal"><span class="pre">$()</span></tt>
expression with that command&#8217;s output. Since the output of <tt class="docutils literal"><span class="pre">find</span></tt> is
the three filenames <tt class="docutils literal"><span class="pre">./data/one.txt</span></tt>, <tt class="docutils literal"><span class="pre">./data/two.txt</span></tt>, and
<tt class="docutils literal"><span class="pre">./haiku.txt</span></tt>, the shell constructs the command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ wc -l ./data/one.txt ./data/two.txt ./haiku.txt
</pre></div>
</div>
<p>which is what we wanted. This expansion is exactly what the shell does
when it expands wildcards like <tt class="docutils literal"><span class="pre">*</span></tt> and <tt class="docutils literal"><span class="pre">?</span></tt>, but lets us use any
command we want as our own &#8220;wildcard&#8221;.</p>
<p>It&#8217;s very common to use <tt class="docutils literal"><span class="pre">find</span></tt> and <tt class="docutils literal"><span class="pre">grep</span></tt> together. The first
finds files that match a pattern; the second looks for lines inside
those files that match another pattern. Here, for example, we can find
PDB files that contain iron atoms by looking for the string &#8220;FE&#8221; in
all the <tt class="docutils literal"><span class="pre">.pdb</span></tt> files above the current directory:</p>
<div class="highlight-python"><div class="highlight"><pre>$ grep FE $(find .. -name &#39;*.pdb&#39;)
../data/pdb/heme.pdb:ATOM     25 FE           1      -0.924   0.535  -0.518
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>Binary Files</dt>
<dd><p class="first">We have focused exclusively on finding things in text files. What
if your data is stored as images, in databases, or in some other
format? One option would be to extend tools like <tt class="docutils literal"><span class="pre">grep</span></tt> to
handle those formats. This hasn&#8217;t happened, and probably won&#8217;t,
because there are too many formats to support.</p>
<p>The second option is to convert the data to text, or extract the
text-ish bits from the data. This is probably the most common
approach, since it only requires people to build one tool per data
format (to extract information). On the one hand, it makes simple
things easy to do. On the negative side, complex things are
usually impossible. For example, it&#8217;s easy enough to write a
program that will extract X and Y dimensions from image files for
<tt class="docutils literal"><span class="pre">grep</span></tt> to play with, but how would you write something to find
values in a spreadsheet whose cells contained formulas?</p>
<p class="last">The third choice is to recognize that the shell and text
processing have their limits, and to use a programming language
such as Python instead. When the time comes to do this, don&#8217;t be
too hard on the shell: many modern programming languages, Python
included, have borrowed a lot of ideas from it, and imitation is
also the sincerest form of praise.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="exercises">
<h1>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h1>
<div class="section" id="using-grep">
<h2>Using grep<a class="headerlink" href="#using-grep" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre>The Tao that is seen
Is not the true Tao, until
You bring fresh toner.

With searching comes loss
and the presence of absence:
&quot;My Thesis&quot; not found.

Yesterday it worked
Today it is not working
Software is like that.
</pre></div>
</div>
<p>From the above text, contained in the file <tt class="docutils literal"><span class="pre">haiku.txt</span></tt>, which
command would result in the following output:</p>
<div class="highlight-python"><div class="highlight"><pre>and the presence of absence
</pre></div>
</div>
<ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">of</span> <span class="pre">haiku.txt</span></tt></li>
<li><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">-E</span> <span class="pre">of</span> <span class="pre">haiku.txt</span></tt></li>
<li><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">-w</span> <span class="pre">of</span> <span class="pre">haiku.txt</span></tt></li>
<li><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">-i</span> <span class="pre">of</span> <span class="pre">haiku.txt</span></tt></li>
</ol>
</div>
<div class="section" id="find-pipeline-reading-comprehension">
<h2><tt class="docutils literal"><span class="pre">find</span></tt> pipeline reading comprehension<a class="headerlink" href="#find-pipeline-reading-comprehension" title="Permalink to this headline">¶</a></h2>
<p>Write a short explanatory comment for the following shell script:</p>
<div class="highlight-python"><div class="highlight"><pre>find . -name &#39;*.dat&#39; | wc -l | sort -n
</pre></div>
</div>
</div>
<div class="section" id="matching-ose-dat-but-not-temp">
<h2>Matching <tt class="docutils literal"><span class="pre">ose.dat</span></tt> but not <tt class="docutils literal"><span class="pre">temp</span></tt><a class="headerlink" href="#matching-ose-dat-but-not-temp" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">-v</span></tt> flag to <tt class="docutils literal"><span class="pre">grep</span></tt> inverts pattern matching, so that only
lines which do <em>not</em> match the pattern are printed. Given that,
which of the following commands will find all files in <tt class="docutils literal"><span class="pre">/data</span></tt>
whose names end in <tt class="docutils literal"><span class="pre">ose.dat</span></tt> (e.g., <tt class="docutils literal"><span class="pre">sucrose.dat</span></tt> or
<tt class="docutils literal"><span class="pre">maltose.dat</span></tt>), but do <em>not</em> contain the word <tt class="docutils literal"><span class="pre">temp</span></tt>?</p>
<ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">find</span> <span class="pre">/data</span> <span class="pre">-name</span> <span class="pre">'*.dat'</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">ose</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-v</span> <span class="pre">temp</span></tt></li>
<li><tt class="docutils literal"><span class="pre">find</span> <span class="pre">/data</span> <span class="pre">-name</span> <span class="pre">ose.dat</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-v</span> <span class="pre">temp</span></tt></li>
<li><tt class="docutils literal"><span class="pre">grep</span> <span class="pre">-v</span> <span class="pre">temp</span> <span class="pre">$(find</span> <span class="pre">/data</span> <span class="pre">-name</span> <span class="pre">'*ose.dat')</span></tt></li>
<li>None of the above.</li>
</ol>
</div>
<div class="section" id="little-women">
<h2>Little Women<a class="headerlink" href="#little-women" title="Permalink to this headline">¶</a></h2>
<p>You and your friend, having just finished reading <em>Little Women</em> by
Louisa May Alcott, are in an argument. Of the four sisters in the
book, Jo, Meg, Beth, and Amy, your friend thinks that Jo was the most
mentioned. You, however, are certain it was Amy. Luckily, you have a
file <tt class="docutils literal"><span class="pre">LittleWomen.txt</span></tt> containing the full text of the novel. Using
a<tt class="docutils literal"><span class="pre">for</span></tt> loop, how would you tabulate the number of times each of
the four sisters is mentioned? Hint: one solution might employ the
commands <tt class="docutils literal"><span class="pre">grep</span></tt> and <tt class="docutils literal"><span class="pre">wc</span></tt> and a <tt class="docutils literal"><span class="pre">|</span></tt>, while another might utilize
<tt class="docutils literal"><span class="pre">grep</span></tt> options.</p>
</div>
</div>


          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, myCloudmesh.org/learning.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'Learning',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>