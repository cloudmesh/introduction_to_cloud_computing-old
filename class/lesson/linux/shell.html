

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Shell (Under Preparation) &mdash; my Cloudmesh Learning documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="../../../about.html"/>
    <link rel="top" title="my Cloudmesh Learning documentation" href="../../../index.html"/>
        <link rel="up" title="Spring 2015 - Big Data Open Source Software Project (BUEX-V 594)" href="../../vc2_sp15/index.html"/>
        <link rel="next" title="Python Programming (Under Preparation)" href="python.html"/>
        <link rel="prev" title="Overview and Introduction (Under Preparation)" href="overview.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../../index.html" class="fa fa-home"> my Cloudmesh</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../preface.html">Preface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../preface.html#conventions">Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../preface.html#using-the-notebooks">Using the Notebooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../about.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../about.html#independent-study-at-iu">Independent Study at IU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about.html#student-employment-at-iu">Student Employment at IU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about.html#contributing-to-the-manual">Contributing to the Manual</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../contact.html">Contact</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../contact.html#contributors">Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../contact.html#support">Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../resources.html">Resources from the Internet</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Cloudmesh in Classes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../lessons.html">Lessons</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../vc2_sp15/index.html"> Spring 2015 - Big Data Open Source Software Project (BUEX-V 594)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../vc_sp15/index.html">Spring 2015 - Big Data Applications to Clouds and HPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i590.html">Fall 2014 - Big Data Opensource Software and Projects (<tt class="docutils literal"><span class="pre">Info</span> <span class="pre">I590</span></tt>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cm-mooc/index.html">Cloudmesh MOOC Shell</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../accounts/index.html">Cloud Accounts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../accounts/accounts.html">Creating FutureSystems Accounts and Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../accounts/details.html">Account and Project Management</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../cloudmesh/index.html">Cloudmesh</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../cloudmesh/overview.html">Cloudmesh Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cloudmesh/setup/index.html">Cloudmesh Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cloudmesh/cm/index.html">Cloudmesh cm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cloudmesh/api/index.html">Cloudmesh API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cloudmesh/shell/index.html">Cloudmesh Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cloudmesh/gui/index.html">Cloudmesh GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cloudmesh/faq.html">Cloudmesh FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../parallel.html">Parallel Shell</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../parallel.html#parallel-distributed-shell-pdsh">Parallel Distributed Shell (pdsh)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../parallel.html#fabric">Fabric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../parallel.html#cloudmesh-parallel-api">Cloudmesh Parallel API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../parallel.html#exercises">Exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../iaas/index.html">IaaS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../iaas/index.html#openstack-clouds">OpenStack Clouds</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../paas/index.html">PaaS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../paas/hadoop.html">Using Hadoop in FutureSystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../paas/hadoop-setup.html">Deploying a Hadoop Cluster on India OpenStack</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../hpc/index.html">HPC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../hpc/hpc.html">HPC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/index.html">Hardware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/indiana.html">Hardware at Indiana University</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../devops/index.html">DevOps</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../devops/history.html">Historical and Functionality Perspective</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../devops/makefile.html">Makefile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../devops/shell.html">Shell Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../devops/configure.html">Configure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../devops/rpm.html">Package Managers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../ipython/index.html">IPython</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../ipython/_ipython.html">IPython</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../rst.html">reStructuredText</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../rst.html#sections">Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rst.html#listtable">Listtable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rst.html#exceltable">Exceltable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rst.html#boxes">Boxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rst.html#sidebar-directive">Sidebar directive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rst.html#autorun">Autorun</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rst.html#hyperlinks">Hyperlinks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rst.html#todo">Todo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../management/index.html">Create Cloudmesh Development Image</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../management/create_image.html">How to setup a Cloudmesh Image</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contribute to Cloudmesh</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../contribute/python-programming-style.html">How to write good Python codes for Cloudmesh</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../todo.html">ToDos</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">my Cloudmesh</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Cloudmesh in Classes</a> &raquo;</li>
      
          <li><a href="../../vc2_sp15/index.html"> Spring 2015 - Big Data Open Source Software Project (BUEX-V 594)</a> &raquo;</li>
      
    <li>Shell (Under Preparation)</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../../_sources/class/lesson/linux/shell.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="shell-under-preparation">
<h1>Shell (Under Preparation)<a class="headerlink" href="#shell-under-preparation" title="Permalink to this headline">¶</a></h1>
<div class="sidebar">
<p class="first sidebar-title">Page Contents</p>
<div class="contents local last topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id1">Overview</a></li>
<li><a class="reference internal" href="#description" id="id2">Description</a><ul>
<li><a class="reference internal" href="#introduction" id="id3">Introduction</a><ul>
<li><a class="reference internal" href="#what-and-why" id="id4">What and Why</a></li>
</ul>
</li>
<li><a class="reference internal" href="#shell-usage" id="id5">Shell Usage</a></li>
<li><a class="reference internal" href="#files-and-directories" id="id6">Files and Directories</a><ul>
<li><a class="reference internal" href="#nelle-s-pipeline-organizing-files" id="id7">Nelle&#8217;s Pipeline: Organizing Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creating-things" id="id8">Creating Things</a></li>
<li><a class="reference internal" href="#pipes-and-filters" id="id9">Pipes and Filters</a><ul>
<li><a class="reference internal" href="#nelle-s-pipeline-checking-files" id="id10">Nelle&#8217;s Pipeline: Checking Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#loops" id="id11">Loops</a></li>
<li><a class="reference internal" href="#finding-things" id="id12">Finding Things</a></li>
<li><a class="reference internal" href="#cheatsheet" id="id13">Cheatsheet</a></li>
</ul>
</li>
<li><a class="reference internal" href="#exercises" id="id14">Exercises</a><ul>
<li><a class="reference internal" href="#exercise-i" id="id15">Exercise I</a></li>
<li><a class="reference internal" href="#exercise-ii" id="id16">Exercise II</a></li>
</ul>
</li>
<li><a class="reference internal" href="#further-reading" id="id17">Further Reading</a></li>
<li><a class="reference internal" href="#acknowledgements" id="id18">Acknowledgements</a></li>
<li><a class="reference internal" href="#next-step" id="id19">Next Step</a></li>
</ul>
</div>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id1">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This lesson will introduce you to using the shell, which is required
for using FutureSystems resources.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Duration: 1 hour</p>
</div>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id2">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>A &#8220;shell&#8221; is a program that facilitates interaction between human and
computer.
By providing this level of abstraction certain tasks which may be
otherwise cumbersome of time-consuming are relatively simple to
accomplish.
There are numerous types of shells.
If you have ever used a computer you have used a shell.
For instance, Windows and Mac OS X use a shell based on graphical
representations with a mouse and keyboard for interaction.
Touch-screen phones and tables also use another type of shell whose
mode of interaction is through touch.
In addition to these which you might be familiar with, we will be using
a command shell to interact with the computer primarily through the
keyboard.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Adventerous readers may be interested to know that both
Windows and Mac OS X provide a command shell.  On Windows you can
run <tt class="docutils literal"><span class="pre">cmd.exe</span></tt> from <cite>Start &#8211;&gt; Run</cite>.  On OS X open <cite>Applications
&#8211;&gt; Utilities &#8211;&gt; Terminal</cite>.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If you wish to follow along please log into your FutureSystems
account (see <a class="reference internal" href="../system/futuresystemsuse.html"><em>Use of FutureSystems (Under Preparation)</em></a>).</p>
</div>
<div class="section" id="introduction">
<h3><a class="toc-backref" href="#id3">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>Learning Objectives</dt>
<dd><ul class="first last simple">
<li>Explain how the shell relates to the keyboard, the screen, the
operating system, and users&#8217; programs.</li>
<li>Explain when and why command-line interfaces should be used
instead of graphical interfaces.</li>
</ul>
</dd>
</dl>
</div>
<p>Nelle Nemo, a marine biologist, has just returned from a six-month
survey of the <a class="reference external" href="http://en.wikipedia.org/wiki/North_Pacific_Gyre">North Pacific
Gyre</a>, where she has
been sampling gelatinous marine life in the <a class="reference external" href="http://en.wikipedia.org/wiki/Great_Pacific_Garbage_Patch">Great Pacific Garbage
Patch</a>. She
has 300 samples in all, and now needs to:</p>
<ol class="arabic simple">
<li>Run each sample through an assay machine that will measure the
relative abundance of 300 different proteins. The machine&#8217;s output
for a single sample is a file with one line for each protein.</li>
<li>Calculate statistics for each of the proteins separately using a
program her supervisor wrote called <tt class="docutils literal"><span class="pre">goostat</span></tt>.</li>
<li>Compare the statistics for each protein with corresponding statistics
for each other protein using a program one of the other graduate
students wrote called <tt class="docutils literal"><span class="pre">goodiff</span></tt>.</li>
<li>Write up. Her supervisor would really like her to do this by the end
of the month so that her paper can appear in an upcoming special
issue of <em>Aquatic Goo Letters</em>.</li>
</ol>
<p>It takes about half an hour for the assay machine to process each
sample. The good news is, it only takes two minutes to set each one up.
Since her lab has eight assay machines that she can use in parallel,
this step will &#8220;only&#8221; take about two weeks.</p>
<p>The bad news is that if she has to run <tt class="docutils literal"><span class="pre">goostat</span></tt> and <tt class="docutils literal"><span class="pre">goodiff</span></tt> by
hand, she&#8217;ll have to enter filenames and click &#8220;OK&#8221; 45,150 times (300
runs of <tt class="docutils literal"><span class="pre">goostat</span></tt>, plus 300x299/2 runs of <tt class="docutils literal"><span class="pre">goodiff</span></tt>). At 30 seconds
each, that will take more than two weeks. Not only would she miss her
paper deadline, the chances of her typing all of those commands right
are practically zero.</p>
<p>The next few lessons will explore what she should do instead. More
specifically, they explain how she can use a command shell to automate
the repetitive steps in her processing pipeline so that her computer can
work 24 hours a day while she writes her paper. As a bonus, once she has
put a processing pipeline together, she will be able to use it again
whenever she collects more data.</p>
<div class="section" id="what-and-why">
<h4><a class="toc-backref" href="#id4">What and Why</a><a class="headerlink" href="#what-and-why" title="Permalink to this headline">¶</a></h4>
<p>At a high level, computers do four things:</p>
<ul class="simple">
<li>run programs</li>
<li>store data</li>
<li>communicate with each other</li>
<li>interact with us</li>
</ul>
<p>They can do the last of these in many different ways, including direct
brain-computer links and speech interfaces. Since these are still in
their infancy, most of us use windows, icons, mice, and pointers. These
technologies didn&#8217;t become widespread until the 1980s, but their roots
go back to Doug Engelbart&#8217;s work in the 1960s, which you can see in what
has been called &#8220;<a class="reference external" href="http://www.youtube.com/watch?v=a11JDLBXtPQ">The Mother of All
Demos</a>&#8221;.</p>
<p>Going back even further, the only way to interact with early computers
was to rewire them. But in between, from the 1950s to the 1980s, most
people used line printers. These devices only allowed input and output
of the letters, numbers, and punctuation found on a standard keyboard,
so programming languages and interfaces had to be designed around that
constraint.</p>
<p>This kind of interface is called a <strong>command-line interface</strong>, or CLI,
to distinguish it from the <strong>graphical user interface</strong>, or GUI, that
most people now use. The heart of a CLI is a <strong>read-evaluate-print
loop</strong>, or REPL: when the user types a command and then presses the
enter (or return) key, the computer reads it, executes it, and prints
its output. The user then types another command, and so on until the
user logs off.</p>
<p>This description makes it sound as though the user sends commands
directly to the computer, and the computer sends output directly to the
user. In fact, there is usually a program in between called a <strong>command
shell</strong>. What the user types goes into the shell; it figures out what
commands to run and orders the computer to execute them. Note, the
reason why the shell is called <em>the shell</em>: it encloses the operating
system in order to hide some of its complexity and make it simpler to
interact with.</p>
<p>A shell is a program like any other. What&#8217;s special about it is that its
job is to run other programs rather than to do calculations itself. The
most popular Unix shell is Bash, the Bourne Again SHell (so-called
because it&#8217;s derived from a shell written by Stephen Bourne &#8212; this is
what passes for wit among programmers). Bash is the default shell on
most modern implementations of Unix, and in most packages that provide
Unix-like tools for Windows.</p>
<p>Using Bash or any other shell sometimes feels more like programming than
like using a mouse. Commands are terse (often only a couple of
characters long), their names are frequently cryptic, and their output
is lines of text rather than something visual like a graph. On the other
hand, the shell allows us to combine existing tools in powerful ways
with only a few keystrokes and to set up pipelines to handle large
volumes of data automatically. In addition, the command line is often
the easiest way to interact with remote machines. As clusters and cloud
computing become more popular for scientific data crunching, being able
to drive them is becoming a necessary skill.</p>
</div>
</div>
<div class="section" id="shell-usage">
<h3><a class="toc-backref" href="#id5">Shell Usage</a><a class="headerlink" href="#shell-usage" title="Permalink to this headline">¶</a></h3>
<p>Once you log into the appropriate machine you will be presented with
the <strong>prompt</strong>, typically represented as the following:</p>
<div class="highlight-python"><div class="highlight"><pre>$
</pre></div>
</div>
<p>At the <strong>prompt</strong> you enter a <strong>command</strong> to run a program.
For instance, the <tt class="docutils literal"><span class="pre">whoami</span></tt> program indicates the username
you logged in under.
To see this type <tt class="docutils literal"><span class="pre">whoami</span></tt> and press enter (the result will be different
but you should recognize your username):</p>
<div class="highlight-python"><div class="highlight"><pre>$ whoami
nelle
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">On Windows you start a program by double-clicking an icon to
going to <cite>Start &#8211;&gt; &lt;Program&gt;</cite> to launch it.
On OS X you might go to the dock at the bottom of the screen.
In a commandline shell you type the name of the program.</p>
</div>
<p>When you execute the <tt class="docutils literal"><span class="pre">whoami</span></tt> command the shell:</p>
<ol class="arabic simple">
<li>finds the program called <tt class="docutils literal"><span class="pre">whoami</span></tt></li>
<li>runs that program</li>
<li>displays the program&#8217;s output</li>
<li>displays a new shell prompt (ready for more commands)</li>
</ol>
</div>
<div class="section" id="files-and-directories">
<h3><a class="toc-backref" href="#id6">Files and Directories</a><a class="headerlink" href="#files-and-directories" title="Permalink to this headline">¶</a></h3>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>Learning Objectives</dt>
<dd><ul class="first last simple">
<li>Explain the similarities and differences between a file and a
directory.</li>
<li>Translate an absolute path into a relative path and vice versa.</li>
<li>Construct absolute and relative paths that identify specific
files and directories.</li>
<li>Explain the steps in the shell&#8217;s read-run-print cycle.</li>
<li>Identify the actual command, flags, and filenames in a
command-line call.</li>
<li>Demonstrate the use of tab completion, and explain its
advantages.</li>
</ul>
</dd>
</dl>
</div>
<p>The part of the operating system responsible for managing files and
directories is called the <strong>file system</strong>. It organizes our data into
files, which hold information, and directories (also called &#8220;folders&#8221;),
which hold files or other directories.</p>
<p>Several commands are frequently used to create, inspect, rename, and
delete files and directories. To start exploring them, let&#8217;s open a
shell window:</p>
<p>The dollar sign is a <strong>prompt</strong>, which shows us that the shell is
waiting for input; your shell may show something more elaborate.</p>
<p>Type the command <tt class="docutils literal"><span class="pre">whoami</span></tt>, then press the Enter key (sometimes marked
Return) to send the command to the shell. The command&#8217;s output is the ID
of the current user, i.e., it shows us who the shell thinks we are:</p>
<p>More specifically, when we type <tt class="docutils literal"><span class="pre">whoami</span></tt> the shell:</p>
<ol class="arabic simple">
<li>finds a program called <tt class="docutils literal"><span class="pre">whoami</span></tt>,</li>
<li>runs that program,</li>
<li>displays that program&#8217;s output, then</li>
<li>displays a new prompt to tell us that it&#8217;s ready for more commands.</li>
</ol>
<p>Next, let&#8217;s find out where we are by running a command called <tt class="docutils literal"><span class="pre">pwd</span></tt>
(which stands for &#8220;print working directory&#8221;). At any moment, our
<strong>current working directory</strong> is our current default directory, i.e.,
the directory that the computer assumes we want to run commands in
unless we explicitly specify something else. Here, the computer&#8217;s
response is <tt class="docutils literal"><span class="pre">/users/nelle</span></tt>, which is Nelle&#8217;s <strong>home directory</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ pwd
/users/nelle
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>Alphabet Soup</p>
<blockquote class="last">
<div>If the command to find out who we are is <tt class="docutils literal"><span class="pre">whoami</span></tt>, the command to
find out where we are ought to be called <tt class="docutils literal"><span class="pre">whereami</span></tt>, so why is it
<tt class="docutils literal"><span class="pre">pwd</span></tt> instead? The usual answer is that in the early 1970s, when
Unix was first being developed, every keystroke counted: the devices
of the day were slow, and backspacing on a teletype was so painful
that cutting the number of keystrokes in order to cut the number of
typing mistakes was actually a win for usability. The reality is
that commands were added to Unix one by one, without any master
plan, by people who were immersed in its jargon. The result is as
inconsistent as the roolz uv Inglish speling, but we&#8217;re stuck with
it now.</div></blockquote>
</div>
<p>To understand what a &#8220;home directory&#8221; is, let&#8217;s have a look at how the
file system as a whole is organized. At the top is the <strong>root
directory</strong> that holds everything else. We refer to it using a slash
character <tt class="docutils literal"><span class="pre">/</span></tt> on its own; this is the leading slash in
<tt class="docutils literal"><span class="pre">/users/nelle</span></tt>.</p>
<p>Inside that directory are several other directories: <tt class="docutils literal"><span class="pre">bin</span></tt> (which is
where some built-in programs are stored), <tt class="docutils literal"><span class="pre">data</span></tt> (for miscellaneous
data files), <tt class="docutils literal"><span class="pre">users</span></tt> (where users&#8217; personal directories are located),
<tt class="docutils literal"><span class="pre">tmp</span></tt> (for temporary files that don&#8217;t need to be stored long-term),
and so on:</p>
<div class="figure">
<img alt="The Filesystem" src="../../../_images/filesystem.svg" /><p class="caption">The Filesystem</p>
</div>
<p>We know that our current working directory <tt class="docutils literal"><span class="pre">/users/nelle</span></tt> is stored
inside <tt class="docutils literal"><span class="pre">/users</span></tt> because <tt class="docutils literal"><span class="pre">/users</span></tt> is the first part of its name.
Similarly, we know that <tt class="docutils literal"><span class="pre">/users</span></tt> is stored inside the root directory
<tt class="docutils literal"><span class="pre">/</span></tt> because its name begins with <tt class="docutils literal"><span class="pre">/</span></tt>.</p>
<p>Underneath <tt class="docutils literal"><span class="pre">/users</span></tt>, we find one directory for each user with an
account on this machine. The Mummy&#8217;s files are stored in
<tt class="docutils literal"><span class="pre">/users/imhotep</span></tt>, Wolfman&#8217;s in <tt class="docutils literal"><span class="pre">/users/larry</span></tt>, and ours in
<tt class="docutils literal"><span class="pre">/users/nelle</span></tt>, which is why <tt class="docutils literal"><span class="pre">nelle</span></tt> is the last part of the
directory&#8217;s name.</p>
<div class="figure">
<img alt="Home Directories" src="../../../_images/home-directories.svg" /><p class="caption">Home Directories</p>
<div class="legend">
<blockquote>
<div>Notice that there are two meanings for the <tt class="docutils literal"><span class="pre">/</span></tt> character. When it
appears at the front of a file or directory name, it refers to the
root directory. When it appears <em>inside</em> a name, it&#8217;s just a
separator.</div></blockquote>
</div>
</div>
<p>Let&#8217;s see what&#8217;s in Nelle&#8217;s home directory by running <tt class="docutils literal"><span class="pre">ls</span></tt>, which
stands for &#8220;listing&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls
creatures  molecules           pizza.cfg
data       north-pacific-gyre  solar.pdf
Desktop    notes.txt           writing
</pre></div>
</div>
<div class="figure">
<img alt="Nelle's Home Directory" src="../../../_images/homedir.svg" /><p class="caption">Nelle&#8217;s Home Directory</p>
</div>
<p><tt class="docutils literal"><span class="pre">ls</span></tt> prints the names of the files and directories in the current
directory in alphabetical order, arranged neatly into columns. We can
make its output more comprehensible by using the <strong>flag</strong> <tt class="docutils literal"><span class="pre">-F</span></tt>,
which tells <tt class="docutils literal"><span class="pre">ls</span></tt> to add a trailing <tt class="docutils literal"><span class="pre">/</span></tt> to the names of
directories:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls -F
creatures/  molecules/           pizza.cfg
data/       north-pacific-gyre/  solar.pdf
Desktop/    notes.txt            writing/
</pre></div>
</div>
<p>Here, we can see that <tt class="docutils literal"><span class="pre">/users/nelle</span></tt> contains seven
<strong>sub-directories</strong>. The names that don&#8217;t have trailing slashes, like
<tt class="docutils literal"><span class="pre">notes.txt</span></tt>, <tt class="docutils literal"><span class="pre">pizza.cfg</span></tt>, and <tt class="docutils literal"><span class="pre">solar.pdf</span></tt>, are plain old files.
And note that there is a space between <tt class="docutils literal"><span class="pre">ls</span></tt> and <tt class="docutils literal"><span class="pre">-F</span></tt>: without it,
the shell thinks we&#8217;re trying to run a command called <tt class="docutils literal"><span class="pre">ls-F</span></tt>, which
doesn&#8217;t exist.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="docutils">
<dt>What&#8217;s In A Name?</dt>
<dd></dd>
</dl>
<p>You may have noticed that all of Nelle&#8217;s files&#8217; names are &#8220;something
dot something&#8221;. This is just a convention: we can call a file
<tt class="docutils literal"><span class="pre">mythesis</span></tt> or almost anything else we want. However, most people
use two-part names most of the time to help them (and their
programs) tell different kinds of files apart. The second part of
such a name is called the <strong>filename extension</strong>, and indicates what
type of data the file holds: <tt class="docutils literal"><span class="pre">.txt</span></tt> signals a plain text file,
<tt class="docutils literal"><span class="pre">.pdf</span></tt> indicates a PDF document, <tt class="docutils literal"><span class="pre">.cfg</span></tt> is a configuration file
full of parameters for some program or other, and so on.</p>
<p>This is just a convention, albeit an important one. Files contain
bytes: it&#8217;s up to us and our programs to interpret those bytes
according to the rules for PDF documents, images, and so on.</p>
<p class="last">Naming a PNG image of a whale as <tt class="docutils literal"><span class="pre">whale.mp3</span></tt> doesn&#8217;t somehow
magically turn it into a recording of whalesong, though it <em>might</em>
cause the operating system to try to open it with a music player
when someone double-clicks it.</p>
</div>
<p>Now let&#8217;s take a look at what&#8217;s in Nelle&#8217;s <tt class="docutils literal"><span class="pre">data</span></tt> directory by running
<tt class="docutils literal"><span class="pre">ls</span> <span class="pre">-F</span> <span class="pre">data</span></tt>, i.e., the command <tt class="docutils literal"><span class="pre">ls</span></tt> with the <strong>arguments</strong> <tt class="docutils literal"><span class="pre">-F</span></tt>
and <tt class="docutils literal"><span class="pre">data</span></tt>. The second argument &#8212; the one <em>without</em> a leading dash
&#8212; tells <tt class="docutils literal"><span class="pre">ls</span></tt> that we want a listing of something other than our
current working directory:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls -F data
amino-acids.txt   elements/     morse.txt
pdb/              planets.txt   sunspot.txt
</pre></div>
</div>
<p>The output shows us that there are four text files and two
sub-sub-directories. Organizing things hierarchically in this way helps
us keep track of our work: it&#8217;s possible to put hundreds of files in our
home directory, just as it&#8217;s possible to pile hundreds of printed papers
on our desk, but it&#8217;s a self-defeating strategy.</p>
<p>Notice, by the way that we spelled the directory name <tt class="docutils literal"><span class="pre">data</span></tt>. It
doesn&#8217;t have a trailing slash: that&#8217;s added to directory names by <tt class="docutils literal"><span class="pre">ls</span></tt>
when we use the <tt class="docutils literal"><span class="pre">-F</span></tt> flag to help us tell things apart. And it doesn&#8217;t
begin with a slash because it&#8217;s a <strong>relative path</strong>, i.e., it tells
<tt class="docutils literal"><span class="pre">ls</span></tt> how to find something from where we are, rather than from the
root of the file system.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>Parameters vs. Arguments</dt>
<dd>According to
<a class="reference external" href="https://en.wikipedia.org/wiki/Parameter_(computer_programming)#Parameters_and_arguments">Wikipedia</a>,
the terms argument and <strong>parameter</strong> mean slightly different things.
In practice, however, most people use them interchangeably or
inconsistently, so we will too.</dd>
</dl>
</div>
<p>If we run <tt class="docutils literal"><span class="pre">ls</span> <span class="pre">-F</span> <span class="pre">/data</span></tt> (<em>with</em> a leading slash) we get a different
answer, because <tt class="docutils literal"><span class="pre">/data</span></tt> is an <strong>absolute path</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls -F /data
access.log    backup/    hardware.cfg
network.cfg
</pre></div>
</div>
<p>The leading <tt class="docutils literal"><span class="pre">/</span></tt> tells the computer to follow the path from the root of
the filesystem, so it always refers to exactly one directory, no matter
where we are when we run the command.</p>
<p>What if we want to change our current working directory? Before we do
this, <tt class="docutils literal"><span class="pre">pwd</span></tt> shows us that we&#8217;re in <tt class="docutils literal"><span class="pre">/users/nelle</span></tt>, and <tt class="docutils literal"><span class="pre">ls</span></tt>
without any arguments shows us that directory&#8217;s contents:</p>
<div class="highlight-python"><div class="highlight"><pre>$ pwd
/users/nelle
$ ls
creatures  molecules           pizza.cfg
data       north-pacific-gyre  solar.pdf
Desktop    notes.txt           writing
</pre></div>
</div>
<p>We can use <tt class="docutils literal"><span class="pre">cd</span></tt> followed by a directory name to change our working
directory. <tt class="docutils literal"><span class="pre">cd</span></tt> stands for &#8220;change directory&#8221;, which is a bit
misleading: the command doesn&#8217;t change the directory, it changes the
shell&#8217;s idea of what directory we are in.:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd data
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">cd</span></tt> doesn&#8217;t print anything, but if we run <tt class="docutils literal"><span class="pre">pwd</span></tt> after it, we can
see that we are now in <tt class="docutils literal"><span class="pre">/users/nelle/data</span></tt>. If we run <tt class="docutils literal"><span class="pre">ls</span></tt> without
arguments now, it lists the contents of <tt class="docutils literal"><span class="pre">/users/nelle/data</span></tt>, because
that&#8217;s where we now are:</p>
<div class="highlight-python"><div class="highlight"><pre>$ pwd
/users/nelle/data
$ ls -F
amino-acids.txt   elements/     morse.txt
pdb/              planets.txt   sunspot.txt
</pre></div>
</div>
<p>We now know how to go down the directory tree: how do we go up? We
could use an absolute path:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd /users/nelle
</pre></div>
</div>
<p>but it&#8217;s almost always simpler to use <tt class="docutils literal"><span class="pre">cd</span> <span class="pre">..</span></tt> to go up one level:</p>
<div class="highlight-python"><div class="highlight"><pre>$ pwd
/users/nelle/data
$ cd ..
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">..</span></tt> is a special directory name meaning &#8220;the directory containing
this one&#8221;, or more succinctly, the <strong>parent</strong> of the current directory.
Sure enough, if we run <tt class="docutils literal"><span class="pre">pwd</span></tt> after running <tt class="docutils literal"><span class="pre">cd</span> <span class="pre">..</span></tt>, we&#8217;re back in
<tt class="docutils literal"><span class="pre">/users/nelle</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ pwd
/users/nelle
</pre></div>
</div>
<p>The special directory <tt class="docutils literal"><span class="pre">..</span></tt> doesn&#8217;t usually show up when we run <tt class="docutils literal"><span class="pre">ls</span></tt>.
If we want to display it, we can give <tt class="docutils literal"><span class="pre">ls</span></tt> the <tt class="docutils literal"><span class="pre">-a</span></tt> flag:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls -F -a
./                  creatures/          notes.txt
../                 data/               pizza.cfg
.bash_profile       molecules/          solar.pdf
Desktop/            north-pacific-gyre/ writing/
</pre></div>
</div>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">-a</span></tt> stands for &#8220;show all&#8221;; it forces <tt class="docutils literal"><span class="pre">ls</span></tt> to show us file and
directory names that begin with <tt class="docutils literal"><span class="pre">.</span></tt>, such as <tt class="docutils literal"><span class="pre">..</span></tt> (which, if
we&#8217;re in <tt class="docutils literal"><span class="pre">/users/nelle</span></tt>, refers to the <tt class="docutils literal"><span class="pre">/users</span></tt> directory). As
you can see, it also displays another special directory that&#8217;s just
called <tt class="docutils literal"><span class="pre">.</span></tt>, which means &#8220;the current working directory&#8221;. It may
seem redundant to have a name for it, but we&#8217;ll see some uses for it
soon.</li>
<li>Finally, we also see a file called <tt class="docutils literal"><span class="pre">.bash_profile</span></tt>. This file
usually contains settings to customize the shell (terminal). There
may also be similar files called <tt class="docutils literal"><span class="pre">.bashrc</span></tt> or <tt class="docutils literal"><span class="pre">.bash_login</span></tt>. For
this lesson material it does not contain any settings.</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>Orthogonality</dt>
<dd>The special names <tt class="docutils literal"><span class="pre">.</span></tt> and <tt class="docutils literal"><span class="pre">..</span></tt> don&#8217;t belong to <tt class="docutils literal"><span class="pre">ls</span></tt>; they are
interpreted the same way by every program. For example, if we are in
<tt class="docutils literal"><span class="pre">/users/nelle/data</span></tt>, the command <tt class="docutils literal"><span class="pre">ls</span> <span class="pre">..</span></tt> will give us a listing
of <tt class="docutils literal"><span class="pre">/users/nelle</span></tt>. When the meanings of the parts are the same no
matter how they&#8217;re combined, programmers say they are
<strong>orthogonal</strong>: Orthogonal systems tend to be easier for people to
learn because there are fewer special cases and exceptions to keep
track of.</dd>
</dl>
</div>
<div class="section" id="nelle-s-pipeline-organizing-files">
<h4><a class="toc-backref" href="#id7">Nelle&#8217;s Pipeline: Organizing Files</a><a class="headerlink" href="#nelle-s-pipeline-organizing-files" title="Permalink to this headline">¶</a></h4>
<p>Knowing just this much about files and directories, Nelle is ready to
organize the files that the protein assay machine will create. First,
she creates a directory called <tt class="docutils literal"><span class="pre">north-pacific-gyre</span></tt> (to remind
herself where the data came from). Inside that, she creates a
directory called <tt class="docutils literal"><span class="pre">2012-07-03</span></tt>, which is the date she started
processing the samples.  She used to use names like
<tt class="docutils literal"><span class="pre">conference-paper</span></tt> and <tt class="docutils literal"><span class="pre">revised-results</span></tt>, but she found them hard
to understand after a couple of years. (The final straw was when she
found herself creating a directory called
<tt class="docutils literal"><span class="pre">revised-revised-results-3</span></tt>.)</p>
<blockquote>
<div>Nelle names her directories &#8220;year-month-day&#8221;, with leading zeroes
for months and days, because the shell displays file and directory
names in alphabetical order. If she used month names, December
would come before July; if she didn&#8217;t use leading zeroes, November
(&#8216;11&#8217;) would come before July (&#8216;7&#8217;).</div></blockquote>
<p>Each of her physical samples is labelled according to her lab&#8217;s
convention with a unique ten-character ID, such as &#8220;NENE01729A&#8221;. This
is what she used in her collection log to record the location, time,
depth, and other characteristics of the sample, so she decides to use
it as part of each data file&#8217;s name. Since the assay machine&#8217;s output
is plain text, she will call her files <tt class="docutils literal"><span class="pre">NENE01729A.txt</span></tt>,
<tt class="docutils literal"><span class="pre">NENE01812A.txt</span></tt>, and so on. All 1520 files will go into the same
directory.</p>
<p>If she is in her home directory, Nelle can see what files she has
using the command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls north-pacific-gyre/2012-07-03/
</pre></div>
</div>
<p>This is a lot to type, but she can let the shell do most of the
work. If she types:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls nor
</pre></div>
</div>
<p>and then presses tab, the shell automatically completes the directory
name for her:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls north-pacific-gyre/
</pre></div>
</div>
<p>If she presses tab again, Bash will add <tt class="docutils literal"><span class="pre">2012-07-03/</span></tt> to the
command, since it&#8217;s the only possible completion. Pressing tab again
does nothing, since there are 1520 possibilities; pressing tab twice
brings up a list of all the files, and so on. This is called <strong>tab
completion</strong>, and we will see it in many other tools as we go on.</p>
</div>
</div>
<div class="section" id="creating-things">
<h3><a class="toc-backref" href="#id8">Creating Things</a><a class="headerlink" href="#creating-things" title="Permalink to this headline">¶</a></h3>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>Learning Objectives</dt>
<dd><ul class="first last simple">
<li>Create a directory hierarchy that matches a given diagram.</li>
<li>Create files in that hierarchy using an editor or by copying and
renaming existing files.</li>
<li>Display the contents of a directory using the command line.</li>
<li>Delete specified files and/or directories.</li>
</ul>
</dd>
</dl>
</div>
<p>We now know how to explore files and directories, but how do we create
them in the first place? Let&#8217;s go back to Nelle&#8217;s home directory,
<tt class="docutils literal"><span class="pre">/users/nelle</span></tt>, and use <tt class="docutils literal"><span class="pre">ls</span> <span class="pre">-F</span></tt> to see what it contains:</p>
<div class="highlight-python"><div class="highlight"><pre>$ pwd
/users/nelle
$ ls -F
creatures/  molecules/           pizza.cfg
data/       north-pacific-gyre/  solar.pdf
Desktop/    notes.txt            writing/
</pre></div>
</div>
<p>Let&#8217;s create a new directory called <tt class="docutils literal"><span class="pre">thesis</span></tt> using the command
<tt class="docutils literal"><span class="pre">mkdir</span> <span class="pre">thesis</span></tt> (which has no output):</p>
<div class="highlight-python"><div class="highlight"><pre>$ mkdir thesis
</pre></div>
</div>
<p>As you might (or might not) guess from its name, <tt class="docutils literal"><span class="pre">mkdir</span></tt> means &#8220;make
directory&#8221;. Since <tt class="docutils literal"><span class="pre">thesis</span></tt> is a relative path (i.e., doesn&#8217;t have a
leading slash), the new directory is created in the current working
directory:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls -F
creatures/  north-pacific-gyre/  thesis/
data/       notes.txt            writing/
Desktop/    pizza.cfg
molecules/  solar.pdf
</pre></div>
</div>
<p>However, there&#8217;s nothing in it yet:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls -F thesis
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>Touching Files</dt>
<dd><p class="first">One of the simplest ways to create an empty file is via the
<tt class="docutils literal"><span class="pre">touch</span></tt> command. Change the working directory to <tt class="docutils literal"><span class="pre">thesis</span></tt>
using <tt class="docutils literal"><span class="pre">cd</span></tt>, then touch an empty file called <tt class="docutils literal"><span class="pre">draft.txt</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd thesis
$ touch draft.txt
</pre></div>
</div>
<p>If we check the directory contents now,:</p>
<div class="last highlight-python"><div class="highlight"><pre>$ ls -F .
draft.txt
</pre></div>
</div>
</dd>
</dl>
</div>
<p>Let&#8217;s change our working directory to <tt class="docutils literal"><span class="pre">thesis</span></tt> using <tt class="docutils literal"><span class="pre">cd</span></tt>, then
run a text editor called Nano to create a file called <tt class="docutils literal"><span class="pre">draft.txt</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd thesis
$ nano draft.txt
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>Which Editor?</dt>
<dd><p class="first">When we say, &#8220;<tt class="docutils literal"><span class="pre">nano</span></tt> is a text editor,&#8221; we really do mean
&#8220;text&#8221;: it can only work with plain character data, not tables,
images, or any other human-friendly media. We use it in examples
because almost anyone can drive it anywhere without training, but
please use something more powerful for real work. On Unix systems
(such as Linux and Mac OS X), many programmers use <a class="reference external" href="http://www.gnu.org/software/emacs/">Emacs</a> or <a class="reference external" href="http://www.vim.org/">Vim</a> (both of which are completely
unintuitive, even by Unix standards), or a graphical editor such
as <a class="reference external" href="http://projects.gnome.org/gedit/">Gedit</a>. On Windows, you
may wish to use <a class="reference external" href="http://notepad-plus-plus.org/">Notepad++</a>.</p>
<p>No matter what editor you use, you will need to know where it
searches for and saves files. If you start it from the shell, it
will (probably) use your current working directory as its default
location. If you use your computer&#8217;s start menu, it may want to
save files in your desktop or documents directory instead. You can
change this by navigating to another directory the first time you
&#8220;Save As...&#8221;</p>
<p class="last">See also <a class="reference internal" href="editors.html"><em>Editing Files (Under Preparation)</em></a></p>
</dd>
</dl>
</div>
<p>Let&#8217;s type in a few lines of text, then use Control-O to write our
data to disk:</p>
<div class="figure">
<img alt="Nano in action" src="../../../_images/nano-screenshot.png" />
<p class="caption">Nano in action</p>
</div>
<p>Once our file is saved, we can use Control-X to quit the editor and
return to the shell. (Unix documentation often uses the shorthand
<tt class="docutils literal"><span class="pre">^A</span></tt> to mean &#8220;control-A&#8221;.) <tt class="docutils literal"><span class="pre">nano</span></tt> doesn&#8217;t leave any output on the
screen after it exits, but <tt class="docutils literal"><span class="pre">ls</span></tt> now shows that we have created a
file called <tt class="docutils literal"><span class="pre">draft.txt</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls
draft.txt
</pre></div>
</div>
<p>Let&#8217;s tidy up by running <tt class="docutils literal"><span class="pre">rm</span> <span class="pre">draft.txt</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ rm draft.txt
</pre></div>
</div>
<p>This command removes files (&#8220;rm&#8221; is short for &#8220;remove&#8221;). If we run
<tt class="docutils literal"><span class="pre">ls</span></tt> again, its output is empty once more, which tells us that our
file is gone:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>Deleting Is Forever</dt>
<dd>The Unix shell doesn&#8217;t have a trash bin that we can recover
deleted files from (though most graphical interfaces to Unix
do). Instead, when we delete files, they are unhooked from the
file system so that their storage space on disk can be
recycled. Tools for finding and recovering deleted files do exist,
but there&#8217;s no guarantee they&#8217;ll work in any particular situation,
since the computer may recycle the file&#8217;s disk space right away.</dd>
</dl>
</div>
<p>Let&#8217;s re-create that file and then move up one directory to
<tt class="docutils literal"><span class="pre">/users/nelle</span></tt> using <tt class="docutils literal"><span class="pre">cd</span> <span class="pre">..</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ pwd
/users/nelle/thesis
$ nano draft.txt
$ ls
draft.txt
$ cd ..
</pre></div>
</div>
<p>If we try to remove the entire <tt class="docutils literal"><span class="pre">thesis</span></tt> directory using <tt class="docutils literal"><span class="pre">rm</span>
<span class="pre">thesis</span></tt>, we get an error message:</p>
<div class="highlight-python"><div class="highlight"><pre>$ rm thesis
rm: cannot remove `thesis&#39;: Is a directory
</pre></div>
</div>
<p>This happens because <tt class="docutils literal"><span class="pre">rm</span></tt> only works on files, not directories. The
right command is <tt class="docutils literal"><span class="pre">rmdir</span></tt>, which is short for &#8220;remove directory&#8221;. It
doesn&#8217;t work yet either, though, because the directory we&#8217;re trying to
remove isn&#8217;t empty:</p>
<div class="highlight-python"><div class="highlight"><pre>$ rmdir thesis
rmdir: failed to remove `thesis&#39;: Directory not empty
</pre></div>
</div>
<p>This little safety feature can save you a lot of grief, particularly
if you are a bad typist. To really get rid of <tt class="docutils literal"><span class="pre">thesis</span></tt> we must first
delete the file <tt class="docutils literal"><span class="pre">draft.txt</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ rm thesis/draft.txt
</pre></div>
</div>
<p>The directory is now empty, so <tt class="docutils literal"><span class="pre">rmdir</span></tt> can delete it:</p>
<div class="highlight-python"><div class="highlight"><pre>$ rmdir thesis
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>With Great Power Comes Great Responsibility</dt>
<dd><p class="first">Removing the files in a directory just so that we can remove the
directory quickly becomes tedious. Instead, we can use <tt class="docutils literal"><span class="pre">rm</span></tt> with
the <tt class="docutils literal"><span class="pre">-r</span></tt> flag (which stands for &#8220;recursive&#8221;):</p>
<div class="highlight-python"><div class="highlight"><pre>$ rm -r thesis
</pre></div>
</div>
<p class="last">This removes everything in the directory, then the directory
itself.  If the directory contains sub-directories, <tt class="docutils literal"><span class="pre">rm</span> <span class="pre">-r</span></tt> does
the same thing to them, and so on. It&#8217;s very handy, but can do a
lot of damage if used without care.</p>
</dd>
</dl>
</div>
<p>Let&#8217;s create that directory and file one more time. (Note that this
time we&#8217;re running <tt class="docutils literal"><span class="pre">nano</span></tt> with the path <tt class="docutils literal"><span class="pre">thesis/draft.txt</span></tt>, rather
than going into the <tt class="docutils literal"><span class="pre">thesis</span></tt> directory and running <tt class="docutils literal"><span class="pre">nano</span></tt> on
<tt class="docutils literal"><span class="pre">draft.txt</span></tt> there.):</p>
<div class="highlight-python"><div class="highlight"><pre>$ pwd
/users/nelle
$ mkdir thesis
$ nano thesis/draft.txt
$ ls thesis
draft.txt
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">draft.txt</span></tt> isn&#8217;t a particularly informative name, so let&#8217;s change
the file&#8217;s name using <tt class="docutils literal"><span class="pre">mv</span></tt>, which is short for &#8220;move&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre>$ mv thesis/draft.txt thesis/quotes.txt
</pre></div>
</div>
<p>The first parameter tells <tt class="docutils literal"><span class="pre">mv</span></tt> what we&#8217;re &#8220;moving&#8221;, while the second
is where it&#8217;s to go. In this case, we&#8217;re moving <tt class="docutils literal"><span class="pre">thesis/draft.txt</span></tt>
to <tt class="docutils literal"><span class="pre">thesis/quotes.txt</span></tt>, which has the same effect as renaming the
file.  Sure enough, <tt class="docutils literal"><span class="pre">ls</span></tt> shows us that <tt class="docutils literal"><span class="pre">thesis</span></tt> now contains one
file called <tt class="docutils literal"><span class="pre">quotes.txt</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls thesis
quotes.txt
</pre></div>
</div>
<p>Just for the sake of inconsistency, <tt class="docutils literal"><span class="pre">mv</span></tt> also works on directories
&#8212; there is no separate <tt class="docutils literal"><span class="pre">mvdir</span></tt> command.</p>
<p>Let&#8217;s move <tt class="docutils literal"><span class="pre">quotes.txt</span></tt> into the current working directory. We use
<tt class="docutils literal"><span class="pre">mv</span></tt> once again, but this time we&#8217;ll just use the name of a
directory as the second parameter to tell <tt class="docutils literal"><span class="pre">mv</span></tt> that we want to keep
the filename, but put the file somewhere new. (This is why the command
is called &#8220;move&#8221;.) In this case, the directory name we use is the
special directory name <tt class="docutils literal"><span class="pre">.</span></tt> that we mentioned earlier.:</p>
<div class="highlight-python"><div class="highlight"><pre>$ mv thesis/quotes.txt .
</pre></div>
</div>
<p>The effect is to move the file from the directory it was in to the
current working directory. <tt class="docutils literal"><span class="pre">ls</span></tt> now shows us that <tt class="docutils literal"><span class="pre">thesis</span></tt> is
empty:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls thesis
</pre></div>
</div>
<p>Further, <tt class="docutils literal"><span class="pre">ls</span></tt> with a filename or directory name as a parameter only
lists that file or directory. We can use this to see that
<tt class="docutils literal"><span class="pre">quotes.txt</span></tt> is still in our current directory:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls quotes.txt
quotes.txt
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">cp</span></tt> command works very much like <tt class="docutils literal"><span class="pre">mv</span></tt>, except it copies a
file instead of moving it. We can check that it did the right thing
using <tt class="docutils literal"><span class="pre">ls</span></tt> with two paths as parameters &#8212; like most Unix commands,
<tt class="docutils literal"><span class="pre">ls</span></tt> can be given thousands of paths at once:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cp quotes.txt thesis/quotations.txt
$ ls quotes.txt thesis/quotations.txt
quotes.txt   thesis/quotations.txt
</pre></div>
</div>
<p>To prove that we made a copy, let&#8217;s delete the <tt class="docutils literal"><span class="pre">quotes.txt</span></tt> file in
the current directory and then run that same <tt class="docutils literal"><span class="pre">ls</span></tt> again.:</p>
<div class="highlight-python"><div class="highlight"><pre>$ rm quotes.txt
$ ls quotes.txt thesis/quotations.txt
ls: cannot access quotes.txt: No such file or directory
thesis/quotations.txt
</pre></div>
</div>
<p>This time it tells us that it can&#8217;t find <tt class="docutils literal"><span class="pre">quotes.txt</span></tt> in the current
directory, but it does find the copy in <tt class="docutils literal"><span class="pre">thesis</span></tt> that we didn&#8217;t
delete.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>Another Useful Abbreviation</dt>
<dd>The shell interprets the character <tt class="docutils literal"><span class="pre">~</span></tt> (tilde) at the start of a
path to mean &#8220;the current user&#8217;s home directory&#8221;. For example, if
Nelle&#8217;s home directory is <tt class="docutils literal"><span class="pre">/home/nelle</span></tt>, then <tt class="docutils literal"><span class="pre">~/data</span></tt> is
equivalent to <tt class="docutils literal"><span class="pre">/home/nelle/data</span></tt>. This only works if it is the
first character in the path: <tt class="docutils literal"><span class="pre">here/there/~/elsewhere</span></tt> is <em>not</em>
<tt class="docutils literal"><span class="pre">/home/nelle/elsewhere</span></tt>.</dd>
<dt>Renaming files</dt>
<dd><p class="first">Suppose that you created a <tt class="docutils literal"><span class="pre">.txt</span></tt> file in your current directory
to contain a list of the statistical tests you will need to do to
analyze your data, and named it: <tt class="docutils literal"><span class="pre">statstics.txt</span></tt></p>
<p>After creating and saving this file you realize you misspelled the
filename! You want to correct the mistake, which of the following
commands could you use to do so?</p>
<ol class="last arabic simple">
<li><tt class="docutils literal"><span class="pre">cp</span> <span class="pre">statstics.txt</span> <span class="pre">statistics.txt</span></tt></li>
<li><tt class="docutils literal"><span class="pre">mv</span> <span class="pre">statstics.txt</span> <span class="pre">statistics.txt</span></tt></li>
<li><tt class="docutils literal"><span class="pre">mv</span> <span class="pre">statstics.txt</span> <span class="pre">.</span></tt></li>
<li><tt class="docutils literal"><span class="pre">cp</span> <span class="pre">statstics.txt</span> <span class="pre">.</span></tt></li>
</ol>
</dd>
<dt>Moving and Copying</dt>
<dd><p class="first">What is the output of the closing <tt class="docutils literal"><span class="pre">ls</span></tt> command in the sequence
shown below?</p>
<div class="highlight-python"><div class="highlight"><pre>$ pwd
/home/jamie/data
$ ls
proteins.dat
$ mkdir recombine
$ mv proteins.dat recombine
$ cp recombine/proteins.dat ../proteins-saved.dat
$ ls
</pre></div>
</div>
<ol class="last arabic simple">
<li><tt class="docutils literal"><span class="pre">proteins-saved.dat</span> <span class="pre">recombine</span></tt></li>
<li><tt class="docutils literal"><span class="pre">recombine</span></tt></li>
<li><tt class="docutils literal"><span class="pre">proteins.dat</span> <span class="pre">recombine</span></tt></li>
<li><tt class="docutils literal"><span class="pre">proteins-saved.dat</span></tt></li>
</ol>
</dd>
<dt>Listing Directories and Files</dt>
<dd><p class="first">Suppose that:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls -F
analyzed/  fructose.dat    raw/   sucrose.dat
</pre></div>
</div>
<p>What command(s) could you run so that the commands below will
produce the output shown?</p>
<div class="last highlight-python"><div class="highlight"><pre>$ ls
analyzed/   raw/
$ ls analyzed
fructose.dat    sucrose.dat
</pre></div>
</div>
</dd>
<dt>Copy with Multiple Filenames</dt>
<dd><p class="first">What does <tt class="docutils literal"><span class="pre">cp</span></tt> do when given several filenames and a directory
name, as in:</p>
<div class="highlight-python"><div class="highlight"><pre>$ mkdir backup
$ cp thesis/citations.txt thesis/quotations.txt backup
</pre></div>
</div>
<p>What does <tt class="docutils literal"><span class="pre">cp</span></tt> do when given three or more filenames, as in:</p>
<div class="last highlight-python"><div class="highlight"><pre>$ ls -F
intro.txt    methods.txt    survey.txt
$ cp intro.txt methods.txt survey.txt
</pre></div>
</div>
</dd>
<dt>Listing Recursively and By Time</dt>
<dd>The command <tt class="docutils literal"><span class="pre">ls</span> <span class="pre">-R</span></tt> lists the contents of directories
recursively, i.e., lists their sub-directories,
sub-sub-directories, and so on in alphabetical order at each
level. The command <tt class="docutils literal"><span class="pre">ls</span> <span class="pre">-t</span></tt> lists things by time of last change,
with most recently changed files or directories first. In what
order does <tt class="docutils literal"><span class="pre">ls</span> <span class="pre">-R</span> <span class="pre">-t</span></tt> display things?</dd>
</dl>
</div>
</div>
<div class="section" id="pipes-and-filters">
<h3><a class="toc-backref" href="#id9">Pipes and Filters</a><a class="headerlink" href="#pipes-and-filters" title="Permalink to this headline">¶</a></h3>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>Learning Objectives</dt>
<dd><ul class="first last simple">
<li>Redirect a command&#8217;s output to a file.</li>
<li>Process a file instead of keyboard input using redirection.</li>
<li>Construct command pipelines with two or more stages.</li>
<li>Explain what usually happens if a program or pipeline isn&#8217;t given
any input to process.</li>
<li>Explain Unix&#8217;s &#8220;small pieces, loosely joined&#8221; philosophy.</li>
</ul>
</dd>
</dl>
</div>
<p>Now that we know a few basic commands, we can finally look at the
shell&#8217;s most powerful feature: the ease with which it lets us combine
existing programs in new ways. We&#8217;ll start with a directory called
<tt class="docutils literal"><span class="pre">molecules</span></tt> that contains six files describing some simple organic
molecules. The <tt class="docutils literal"><span class="pre">.pdb</span></tt> extension indicates that these files are in
Protein Data Bank format, a simple text format that specifies the type
and position of each atom in the molecule.:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls molecules
cubane.pdb    ethane.pdb    methane.pdb
octane.pdb    pentane.pdb   propane.pdb
</pre></div>
</div>
<p>Let&#8217;s go into that directory with <tt class="docutils literal"><span class="pre">cd</span></tt> and run the command <tt class="docutils literal"><span class="pre">wc</span>
<span class="pre">*.pdb</span></tt>. <tt class="docutils literal"><span class="pre">wc</span></tt> is the &#8220;word count&#8221; command: it counts the number of
lines, words, and characters in files. The <tt class="docutils literal"><span class="pre">*</span></tt> in <tt class="docutils literal"><span class="pre">*.pdb</span></tt> matches
zero or more characters, so the shell turns <tt class="docutils literal"><span class="pre">*.pdb</span></tt> into a complete
list of <tt class="docutils literal"><span class="pre">.pdb</span></tt> files:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd molecules
$ wc *.pdb
  20  156 1158 cubane.pdb
  12   84  622 ethane.pdb
   9   57  422 methane.pdb
  30  246 1828 octane.pdb
  21  165 1226 pentane.pdb
  15  111  825 propane.pdb
 107  819 6081 total
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>Wildcards</dt>
<dd><p class="first"><tt class="docutils literal"><span class="pre">*</span></tt> is a <strong>wildcard</strong>. It matches zero or more characters, so
<tt class="docutils literal"><span class="pre">*.pdb</span></tt> matches <tt class="docutils literal"><span class="pre">ethane.pdb</span></tt>, <tt class="docutils literal"><span class="pre">propane.pdb</span></tt>, and so on. On
the other hand, <tt class="docutils literal"><span class="pre">p*.pdb</span></tt> only matches <tt class="docutils literal"><span class="pre">pentane.pdb</span></tt> and
<tt class="docutils literal"><span class="pre">propane.pdb</span></tt>, because the &#8216;p&#8217; at the front only matches itself.</p>
<p><tt class="docutils literal"><span class="pre">?</span></tt> is also a wildcard, but it only matches a single character.
This means that <tt class="docutils literal"><span class="pre">p?.pdb</span></tt> matches <tt class="docutils literal"><span class="pre">pi.pdb</span></tt> or <tt class="docutils literal"><span class="pre">p5.pdb</span></tt>, but
not <tt class="docutils literal"><span class="pre">propane.pdb</span></tt>. We can use any number of wildcards at a time:
for example, <tt class="docutils literal"><span class="pre">p*.p?*</span></tt> matches anything that starts with a &#8216;p&#8217;
and ends with &#8216;.&#8217;, &#8216;p&#8217;, and at least one more character (since the
&#8216;?&#8217; has to match one character, and the final &#8216;*&#8217; can match any
number of characters). Thus, <tt class="docutils literal"><span class="pre">p*.p?*</span></tt> would match
<tt class="docutils literal"><span class="pre">preferred.practice</span></tt>, and even <tt class="docutils literal"><span class="pre">p.pi</span></tt> (since the first &#8216;*&#8217;
can match no characters at all), but not <tt class="docutils literal"><span class="pre">quality.practice</span></tt>
(doesn&#8217;t start with &#8216;p&#8217;) or <tt class="docutils literal"><span class="pre">preferred.p</span></tt> (there isn&#8217;t at least
one character after the &#8216;.p&#8217;).</p>
<p class="last">When the shell sees a wildcard, it expands the wildcard to create
a list of matching filenames <em>before</em> running the command that was
asked for. As an exception, if a wildcard expression does not
match any file, Bash will pass the expression as a parameter to
the command as it is. For example typing <tt class="docutils literal"><span class="pre">ls</span> <span class="pre">*.pdf</span></tt> in the
molecules directory (which contains only files with names ending
with <tt class="docutils literal"><span class="pre">.pdb</span></tt>) results in an error message that there is no file
called <tt class="docutils literal"><span class="pre">*.pdf</span></tt>. However, generally commands like <tt class="docutils literal"><span class="pre">wc</span></tt> and
<tt class="docutils literal"><span class="pre">ls</span></tt> see the lists of file names matching these expressions, but
not the wildcards themselves. It is the shell, not the other
programs, that deals with expanding wildcards, and this another
example of orthogonal design.</p>
</dd>
</dl>
</div>
<p>If we run <tt class="docutils literal"><span class="pre">wc</span> <span class="pre">-l</span></tt> instead of just <tt class="docutils literal"><span class="pre">wc</span></tt>, the output shows only the
number of lines per file:</p>
<div class="highlight-python"><div class="highlight"><pre>$ wc -l *.pdb
  20  cubane.pdb
  12  ethane.pdb
   9  methane.pdb
  30  octane.pdb
  21  pentane.pdb
  15  propane.pdb
 107  total
</pre></div>
</div>
<p>We can also use <tt class="docutils literal"><span class="pre">-w</span></tt> to get only the number of words, or <tt class="docutils literal"><span class="pre">-c</span></tt> to
get only the number of characters.</p>
<p>Which of these files is shortest? It&#8217;s an easy question to answer when
there are only six files, but what if there were 6000? Our first step
toward a solution is to run the command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ wc -l *.pdb &gt; lengths.txt
</pre></div>
</div>
<p>The greater than symbol, <tt class="docutils literal"><span class="pre">&gt;</span></tt>, tells the shell to <strong>redirect</strong> the
command&#8217;s output to a file instead of printing it to the screen. The
shell will create the file if it doesn&#8217;t exist, or overwrite the
contents of that file if it does. (This is why there is no screen
output: everything that <tt class="docutils literal"><span class="pre">wc</span></tt> would have printed has gone into the
file <tt class="docutils literal"><span class="pre">lengths.txt</span></tt> instead.) <tt class="docutils literal"><span class="pre">ls</span> <span class="pre">lengths.txt</span></tt> confirms that the
file exists:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls lengths.txt
lengths.txt
</pre></div>
</div>
<p>We can now send the content of <tt class="docutils literal"><span class="pre">lengths.txt</span></tt> to the screen using
<tt class="docutils literal"><span class="pre">cat</span> <span class="pre">lengths.txt</span></tt>. <tt class="docutils literal"><span class="pre">cat</span></tt> stands for &#8220;concatenate&#8221;: it prints the
contents of files one after another. There&#8217;s only one file in this
case, so <tt class="docutils literal"><span class="pre">cat</span></tt> just shows us what it contains:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cat lengths.txt
  20  cubane.pdb
  12  ethane.pdb
   9  methane.pdb
  30  octane.pdb
  21  pentane.pdb
  15  propane.pdb
 107  total
</pre></div>
</div>
<p>Now let&#8217;s use the <tt class="docutils literal"><span class="pre">sort</span></tt> command to sort its contents. We will also
use the -n flag to specify that the sort is numerical instead of
alphabetical. This does <em>not</em> change the file; instead, it sends the
sorted result to the screen:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sort -n lengths.txt
  9  methane.pdb
 12  ethane.pdb
 15  propane.pdb
 20  cubane.pdb
 21  pentane.pdb
 30  octane.pdb
107  total
</pre></div>
</div>
<p>We can put the sorted list of lines in another temporary file called
<tt class="docutils literal"><span class="pre">sorted-lengths.txt</span></tt> by putting <tt class="docutils literal"><span class="pre">&gt;</span> <span class="pre">sorted-lengths.txt</span></tt> after the
command, just as we used <tt class="docutils literal"><span class="pre">&gt;</span> <span class="pre">lengths.txt</span></tt> to put the output of <tt class="docutils literal"><span class="pre">wc</span></tt>
into <tt class="docutils literal"><span class="pre">lengths.txt</span></tt>. Once we&#8217;ve done that, we can run another command
called <tt class="docutils literal"><span class="pre">head</span></tt> to get the first few lines in <tt class="docutils literal"><span class="pre">sorted-lengths.txt</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sort -n lengths.txt &gt; sorted-lengths.txt
$ head -1 sorted-lengths.txt
  9  methane.pdb
</pre></div>
</div>
<p>Using the parameter <tt class="docutils literal"><span class="pre">-1</span></tt> with <tt class="docutils literal"><span class="pre">head</span></tt> tells it that we only want
the first line of the file; <tt class="docutils literal"><span class="pre">-20</span></tt> would get the first 20, and so
on. Since <tt class="docutils literal"><span class="pre">sorted-lengths.txt</span></tt> contains the lengths of our files
ordered from least to greatest, the output of <tt class="docutils literal"><span class="pre">head</span></tt> must be the
file with the fewest lines.</p>
<p>If you think this is confusing, you&#8217;re in good company: even once you
understand what <tt class="docutils literal"><span class="pre">wc</span></tt>, <tt class="docutils literal"><span class="pre">sort</span></tt>, and <tt class="docutils literal"><span class="pre">head</span></tt> do, all those
intermediate files make it hard to follow what&#8217;s going on. We can make
it easier to understand by running <tt class="docutils literal"><span class="pre">sort</span></tt> and <tt class="docutils literal"><span class="pre">head</span></tt> together:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sort -n lengths.txt | head -1
  9  methane.pdb
</pre></div>
</div>
<p>The vertical bar between the two commands is called a <strong>pipe</strong>. It
tells the shell that we want to use the output of the command on the
left as the input to the command on the right. The computer might
create a temporary file if it needs to, or copy data from one program
to the other in memory, or something else entirely; we don&#8217;t have to
know or care.</p>
<p>We can use another pipe to send the output of <tt class="docutils literal"><span class="pre">wc</span></tt> directly to
<tt class="docutils literal"><span class="pre">sort</span></tt>, which then sends its output to <tt class="docutils literal"><span class="pre">head</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ wc -l *.pdb | sort -n | head -1
  9  methane.pdb
</pre></div>
</div>
<p>This is exactly like a mathematician nesting functions like <em>log(3x)</em>
and saying &#8220;the log of three times <em>x</em>&#8221;. In our case, the calculation
is &#8220;head of sort of line count of <tt class="docutils literal"><span class="pre">*.pdb</span></tt>&#8221;.</p>
<p>Here&#8217;s what actually happens behind the scenes when we create a pipe.
When a computer runs a program &#8212; any program &#8212; it creates a
<strong>process</strong> in memory to hold the program&#8217;s software and its current
state. Every process has an input channel called <strong>standard
input</strong>. (By this point, you may be surprised that the name is so
memorable, but don&#8217;t worry: most Unix programmers call it
&#8220;stdin&#8221;. Every process also has a default output channel called
<strong>standard output</strong> (or &#8220;stdout&#8221;).</p>
<p>The shell is actually just another program. Under normal
circumstances, whatever we type on the keyboard is sent to the shell
on its standard input, and whatever it produces on standard output is
displayed on our screen. When we tell the shell to run a program, it
creates a new process and temporarily sends whatever we type on our
keyboard to that process&#8217;s standard input, and whatever the process
sends to standard output to the screen.</p>
<p>Here&#8217;s what happens when we run <tt class="docutils literal"><span class="pre">wc</span> <span class="pre">-l</span> <span class="pre">*.pdb</span> <span class="pre">&gt;</span> <span class="pre">lengths.txt</span></tt>. The
shell starts by telling the computer to create a new process to run
the <tt class="docutils literal"><span class="pre">wc</span></tt> program. Since we&#8217;ve provided some filenames as parameters,
<tt class="docutils literal"><span class="pre">wc</span></tt> reads from them instead of from standard input. And since we&#8217;ve
used <tt class="docutils literal"><span class="pre">&gt;</span></tt> to redirect output to a file, the shell connects the
process&#8217;s standard output to that file.</p>
<p>If we run <tt class="docutils literal"><span class="pre">wc</span> <span class="pre">-l</span> <span class="pre">*.pdb</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">-n</span></tt> instead, the shell creates two
processes (one for each process in the pipe) so that <tt class="docutils literal"><span class="pre">wc</span></tt> and
<tt class="docutils literal"><span class="pre">sort</span></tt> run simultaneously. The standard output of <tt class="docutils literal"><span class="pre">wc</span></tt> is fed
directly to the standard input of <tt class="docutils literal"><span class="pre">sort</span></tt>; since there&#8217;s no
redirection with <tt class="docutils literal"><span class="pre">&gt;</span></tt>, <tt class="docutils literal"><span class="pre">sort</span></tt>&#8216;s output goes to the screen. And if
we run <tt class="docutils literal"><span class="pre">wc</span> <span class="pre">-l</span> <span class="pre">*.pdb</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">-n</span> <span class="pre">|</span> <span class="pre">head</span> <span class="pre">-1</span></tt>, we get three processes
with data flowing from the files, through <tt class="docutils literal"><span class="pre">wc</span></tt> to <tt class="docutils literal"><span class="pre">sort</span></tt>, and from
<tt class="docutils literal"><span class="pre">sort</span></tt> through <tt class="docutils literal"><span class="pre">head</span></tt> to the screen.</p>
<p>This simple idea is why Unix has been so successful. Instead of
creating enormous programs that try to do many different things, Unix
programmers focus on creating lots of simple tools that each do one
job well, and that work well with each other. This programming model
is called &#8220;pipes and filters&#8221;. We&#8217;ve already seen pipes; a <strong>filter</strong>
is a program like <tt class="docutils literal"><span class="pre">wc</span></tt> or <tt class="docutils literal"><span class="pre">sort</span></tt> that transforms a stream of input
into a stream of output. Almost all of the standard Unix tools can
work this way: unless told to do otherwise, they read from standard
input, do something with what they&#8217;ve read, and write to standard
output.</p>
<p>The key is that any program that reads lines of text from standard
input and writes lines of text to standard output can be combined with
every other program that behaves this way as well. You can <em>and
should</em> write your programs this way so that you and other people can
put those programs into pipes to multiply their power.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>Redirecting Input</dt>
<dd>As well as using <tt class="docutils literal"><span class="pre">&gt;</span></tt> to redirect a program&#8217;s output, we can use
<tt class="docutils literal"><span class="pre">&lt;</span></tt> to redirect its input, i.e., to read from a file instead of
from standard input. For example, instead of writing <tt class="docutils literal"><span class="pre">wc</span>
<span class="pre">ammonia.pdb</span></tt>, we could write <tt class="docutils literal"><span class="pre">wc</span> <span class="pre">&lt;</span> <span class="pre">ammonia.pdb</span></tt>. In the first
case, <tt class="docutils literal"><span class="pre">wc</span></tt> gets a command line parameter telling it what file to
open. In the second, <tt class="docutils literal"><span class="pre">wc</span></tt> doesn&#8217;t have any command line
parameters, so it reads from standard input, but we have told the
shell to send the contents of <tt class="docutils literal"><span class="pre">ammonia.pdb</span></tt> to <tt class="docutils literal"><span class="pre">wc</span></tt>&#8216;s standard
input.</dd>
</dl>
</div>
<div class="section" id="nelle-s-pipeline-checking-files">
<h4><a class="toc-backref" href="#id10">Nelle&#8217;s Pipeline: Checking Files</a><a class="headerlink" href="#nelle-s-pipeline-checking-files" title="Permalink to this headline">¶</a></h4>
<p>Nelle has run her samples through the assay machines and created 1520
files in the <tt class="docutils literal"><span class="pre">north-pacific-gyre/2012-07-03</span></tt> directory described
earlier. As a quick sanity check, she types:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd north-pacific-gyre/2012-07-03
$ wc -l *.txt
</pre></div>
</div>
<p>The output is 1520 lines that look like this:</p>
<div class="highlight-python"><div class="highlight"><pre>300 NENE01729A.txt
300 NENE01729B.txt
300 NENE01736A.txt
300 NENE01751A.txt
300 NENE01751B.txt
300 NENE01812A.txt
... ...
</pre></div>
</div>
<p>Now she types this:</p>
<div class="highlight-python"><div class="highlight"><pre>$ wc -l *.txt | sort -n | head -5
 240 NENE02018B.txt
 300 NENE01729A.txt
 300 NENE01729B.txt
 300 NENE01736A.txt
 300 NENE01751A.txt
</pre></div>
</div>
<p>Whoops: one of the files is 60 lines shorter than the others. When she
goes back and checks it, she sees that she did that assay at 8:00 on a
Monday morning &#8212; someone was probably in using the machine on the
weekend, and she forgot to reset it. Before re-running that sample,
she checks to see if any files have too much data:</p>
<div class="highlight-python"><div class="highlight"><pre>$ wc -l *.txt | sort -n | tail -5
 300 NENE02040A.txt
 300 NENE02040B.txt
 300 NENE02040Z.txt
 300 NENE02043A.txt
 300 NENE02043B.txt
</pre></div>
</div>
<p>Those numbers look good &#8212; but what&#8217;s that &#8216;Z&#8217; doing there in the
third-to-last line? All of her samples should be marked &#8216;A&#8217; or &#8216;B&#8217;; by
convention, her lab uses &#8216;Z&#8217; to indicate samples with missing
information. To find others like it, she does this:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls *Z.txt
NENE01971Z.txt    NENE02040Z.txt
</pre></div>
</div>
<p>Sure enough, when she checks the log on her laptop, there&#8217;s no depth
recorded for either of those samples. Since it&#8217;s too late to get the
information any other way, she must exclude those two files from her
analysis. She could just delete them using <tt class="docutils literal"><span class="pre">rm</span></tt>, but there are
actually some analyses she might do later where depth doesn&#8217;t matter,
so instead, she&#8217;ll just be careful later on to select files using the
wildcard expression <tt class="docutils literal"><span class="pre">*[AB].txt</span></tt>. As always, the &#8216;*&#8217; matches any
number of characters; the expression <tt class="docutils literal"><span class="pre">[AB]</span></tt> matches either an &#8216;A&#8217; or
a &#8216;B&#8217;, so this matches all the valid data files she has.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>What does <tt class="docutils literal"><span class="pre">sort</span> <span class="pre">-n</span></tt> do?</dt>
<dd><p class="first">If we run <tt class="docutils literal"><span class="pre">sort</span></tt> on this file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">10</span>
<span class="mi">2</span>
<span class="mi">19</span>
<span class="mi">22</span>
<span class="mi">6</span>
</pre></div>
</div>
<p>the output is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">10</span>
<span class="mi">19</span>
<span class="mi">2</span>
<span class="mi">22</span>
<span class="mi">6</span>
</pre></div>
</div>
<p>If we run <tt class="docutils literal"><span class="pre">sort</span> <span class="pre">-n</span></tt> on the same input, we get this instead:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">2</span>
<span class="mi">6</span>
<span class="mi">10</span>
<span class="mi">19</span>
<span class="mi">22</span>
</pre></div>
</div>
<p class="last">Explain why <tt class="docutils literal"><span class="pre">-n</span></tt> has this effect.</p>
</dd>
<dt>What does <tt class="docutils literal"><span class="pre">&lt;</span></tt> mean?</dt>
<dd><p class="first">What is the difference between:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">wc</span> <span class="o">-</span><span class="n">l</span> <span class="o">&lt;</span> <span class="n">mydata</span><span class="o">.</span><span class="n">dat</span>
</pre></div>
</div>
<p>and:</p>
<div class="last highlight-python"><div class="highlight"><pre>wc -l mydata.dat
</pre></div>
</div>
</dd>
<dt>Piping commands together</dt>
<dd><p class="first">In our current directory, we want to find the 3 files which have
the least number of lines. Which command listed below would work?</p>
<ol class="last arabic simple">
<li><tt class="docutils literal"><span class="pre">wc</span> <span class="pre">-l</span> <span class="pre">*</span> <span class="pre">&gt;</span> <span class="pre">sort</span> <span class="pre">-n</span> <span class="pre">&gt;</span> <span class="pre">head</span> <span class="pre">-3</span></tt></li>
<li><tt class="docutils literal"><span class="pre">wc</span> <span class="pre">-l</span> <span class="pre">*</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">-n</span> <span class="pre">|</span> <span class="pre">head</span> <span class="pre">1-3</span></tt></li>
<li><tt class="docutils literal"><span class="pre">wc</span> <span class="pre">-l</span> <span class="pre">*</span> <span class="pre">|</span> <span class="pre">head</span> <span class="pre">-3</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">-n</span></tt></li>
<li><tt class="docutils literal"><span class="pre">wc</span> <span class="pre">-l</span> <span class="pre">*</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">-n</span> <span class="pre">|</span> <span class="pre">head</span> <span class="pre">-3</span></tt></li>
</ol>
</dd>
<dt>Why does <tt class="docutils literal"><span class="pre">uniq</span></tt> only remove adjacent duplicates?</dt>
<dd><p class="first">The command <tt class="docutils literal"><span class="pre">uniq</span></tt> removes adjacent duplicated lines from its
input. For example, if a file <tt class="docutils literal"><span class="pre">salmon.txt</span></tt> contains:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">coho</span>
<span class="n">coho</span>
<span class="n">steelhead</span>
<span class="n">coho</span>
<span class="n">steelhead</span>
<span class="n">steelhead</span>
</pre></div>
</div>
<p>then <tt class="docutils literal"><span class="pre">uniq</span> <span class="pre">salmon.txt</span></tt> produces:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">coho</span>
<span class="n">steelhead</span>
<span class="n">coho</span>
<span class="n">steelhead</span>
</pre></div>
</div>
<p class="last">Why do you think <tt class="docutils literal"><span class="pre">uniq</span></tt> only removes <em>adjacent</em> duplicated
lines?  (Hint: think about very large data sets.) What other
command could you combine with it in a pipe to remove all
duplicated lines?</p>
</dd>
<dt>Pipe reading comprehension</dt>
<dd><p class="first">A file called <tt class="docutils literal"><span class="pre">animals.txt</span></tt> contains the following data:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">2012</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mo">05</span><span class="p">,</span><span class="n">deer</span>
<span class="mi">2012</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mo">05</span><span class="p">,</span><span class="n">rabbit</span>
<span class="mi">2012</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mo">05</span><span class="p">,</span><span class="n">raccoon</span>
<span class="mi">2012</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mo">06</span><span class="p">,</span><span class="n">rabbit</span>
<span class="mi">2012</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mo">06</span><span class="p">,</span><span class="n">deer</span>
<span class="mi">2012</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mo">06</span><span class="p">,</span><span class="n">fox</span>
<span class="mi">2012</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mo">07</span><span class="p">,</span><span class="n">rabbit</span>
<span class="mi">2012</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mo">07</span><span class="p">,</span><span class="n">bear</span>
</pre></div>
</div>
<p>What text passes through each of the pipes and the final redirect
in the pipeline below?</p>
<div class="last highlight-python"><div class="highlight"><pre>cat animals.txt | head -5 | tail -3 | sort -r &gt; final.txt
</pre></div>
</div>
</dd>
<dt>Pipe construction</dt>
<dd><p class="first">The command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cut -d , -f 2 animals.txt
</pre></div>
</div>
<p>produces the following output:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">deer</span>
<span class="n">rabbit</span>
<span class="n">raccoon</span>
<span class="n">rabbit</span>
<span class="n">deer</span>
<span class="n">fox</span>
<span class="n">rabbit</span>
<span class="n">bear</span>
</pre></div>
</div>
<p class="last">What other command(s) could be added to this in a pipeline to find
out what animals the file contains (without any duplicates in
their names)?</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="loops">
<h3><a class="toc-backref" href="#id11">Loops</a><a class="headerlink" href="#loops" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="finding-things">
<h3><a class="toc-backref" href="#id12">Finding Things</a><a class="headerlink" href="#finding-things" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="cheatsheet">
<h3><a class="toc-backref" href="#id13">Cheatsheet</a><a class="headerlink" href="#cheatsheet" title="Permalink to this headline">¶</a></h3>
<p>uname
head
date
uptime
whoami
man</p>
<p>pwd
mkdir
cd
ls</p>
<p>-a
-R
-r
-t
-S
-l
-1
-m
-Q</p>
<p>grep
grep -i
grep -r
grep -v
grep -o
find dir -name
find dir -iname
whereis
locate</p>
<p>touch
cat
less
file
cp
mv
rm
head
tail
chmod</p>
<p>ps
top
kill
pkill
killall</p>
</div>
</div>
<div class="section" id="exercises">
<h2><a class="toc-backref" href="#id14">Exercises</a><a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h2>
<div class="section" id="exercise-i">
<h3><a class="toc-backref" href="#id15">Exercise I</a><a class="headerlink" href="#exercise-i" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="exercise-ii">
<h3><a class="toc-backref" href="#id16">Exercise II</a><a class="headerlink" href="#exercise-ii" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="further-reading">
<h2><a class="toc-backref" href="#id17">Further Reading</a><a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h2>
<p>What is covered here is a small overview of using the commandline
shell.
For further reading please consult the <a class="reference external" href="http://www.tldp.org/LDP/Bash-Beginners-Guide/html/">Bash Guide for Beginners</a>
Additionally, there are numerous shell summaries <a class="reference external" href="https://www.google.com/search?q=linux+shell+cheat+sheet">a Google Search away</a></p>
</div>
<div class="section" id="acknowledgements">
<h2><a class="toc-backref" href="#id18">Acknowledgements</a><a class="headerlink" href="#acknowledgements" title="Permalink to this headline">¶</a></h2>
<p>Parts of this lesson were adapted from the <a class="reference external" href="http://swcarpentry.github.io/shell-novice/">Software Carpentry
lesson</a> on using the Shell, which is distributed under a <a class="reference external" href="https://creativecommons.org/licenses/by/4.0/">Creative
Commons Attribution licence v4</a> and is copywrite <a class="reference external" href="http://software-carpentry.org/">Software Carpentry</a>.</p>
</div>
<div class="section" id="next-step">
<h2><a class="toc-backref" href="#id19">Next Step</a><a class="headerlink" href="#next-step" title="Permalink to this headline">¶</a></h2>
<p>In the next page, ...</p>
<p><a class="reference external" href="link">Link here</a></p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="python.html" class="btn btn-neutral float-right" title="Python Programming (Under Preparation)"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral" title="Overview and Introduction (Under Preparation)"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, myCloudmesh.org/learning.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'Learning',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>