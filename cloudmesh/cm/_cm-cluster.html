

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Deploying Virtual Cluster with Cloudmesh cm &mdash; my Cloudmesh Learning documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/css/my_theme.css" type="text/css" />
  
        <link rel="author" title="About these documents"
              href="../../about.html"/>
    <link rel="top" title="my Cloudmesh Learning documentation" href="../../index.html"/>
        <link rel="up" title="Cloudmesh cm" href="index.html"/>
        <link rel="next" title="Managing multiple VMs with Cloudmesh cm" href="_cm-group.html"/>
        <link rel="prev" title="Metric Commands in Cloudmesh cm" href="_cm-limits.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../index.html" class="fa fa-home"> my Cloudmesh</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../preface.html">Preface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../preface.html#conventions">Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../preface.html#using-the-notebooks">Using the Notebooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../about.html#independent-study-at-iu">Independent Study at IU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about.html#student-employment-at-iu">Student Employment at IU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about.html#contributing-to-the-manual">Contributing to the Manual</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contact.html#contributors">Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contact.html#support">Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources from the Internet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class/index.html">Cloudmesh in Classes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../class/bdossp_sp15/index.html"> Spring 2015 - Big Data Open Source Software Project (BUEX-V 594)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../class/vc_sp15/index.html">Spring 2015 - Big Data Applications to Clouds and HPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../class/i590.html">Fall 2014 - Big Data Applications and Analytics (<tt class="docutils literal"><span class="pre">Info</span> <span class="pre">I590</span></tt>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../class/cm-mooc/index.html">VM for Big Data Applications and Analytics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../class/lessons.html">Lessons</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../accounts/index.html">Cloud Accounts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../accounts/accounts.html">Creating FutureSystems Accounts and Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../accounts/details.html">Account and Project Management</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Cloudmesh</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview.html">Cloudmesh Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup/index.html">Cloudmesh Setup</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Cloudmesh cm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html">Cloudmesh API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/index.html">Cloudmesh Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gui/index.html">Cloudmesh GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html">Cloudmesh FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../parallel.html">Parallel Shell</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../parallel.html#parallel-distributed-shell-pdsh">Parallel Distributed Shell (pdsh)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../parallel.html#fabric">Fabric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../parallel.html#cloudmesh-parallel-api">Cloudmesh Parallel API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../parallel.html#exercises">Exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../iaas/index.html">IaaS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../iaas/index.html#openstack-clouds">OpenStack Clouds</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../paas/index.html">PaaS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../paas/hadoop.html">Using Hadoop in FutureSystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../paas/hadoop-setup.html">Deploying a Hadoop Cluster on India OpenStack</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hpc/index.html">HPC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../hpc/hpc.html">HPC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/index.html">Hardware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/indiana.html">Hardware at Indiana University</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../devops/index.html">DevOps</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../devops/history.html">Historical and Functionality Perspective</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../devops/makefile.html">Makefile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../devops/shell.html">Shell Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../devops/configure.html">Configure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../devops/rpm.html">Package Managers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ipython/index.html">IPython</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../ipython/_ipython.html">IPython</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../rst.html">reStructuredText</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../rst.html#sections">Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rst.html#listtable">Listtable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rst.html#exceltable">Exceltable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rst.html#boxes">Boxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rst.html#sidebar-directive">Sidebar directive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rst.html#autorun">Autorun</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rst.html#hyperlinks">Hyperlinks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rst.html#todo">Todo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../management/index.html">Create Cloudmesh Development Image</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../management/create_image.html">How to setup a Cloudmesh Image</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribute to Cloudmesh</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contribute/python-programming-style.html">How to write good Python codes for Cloudmesh</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../todo.html">ToDos</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">my Cloudmesh</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Cloudmesh</a> &raquo;</li>
      
          <li><a href="index.html">Cloudmesh cm</a> &raquo;</li>
      
    <li>Deploying Virtual Cluster with Cloudmesh <tt class="docutils literal"><span class="pre">cm</span></tt></li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../_sources/cloudmesh/cm/_cm-cluster.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="deploying-virtual-cluster-with-cloudmesh-cm">
<h1>Deploying Virtual Cluster with Cloudmesh <tt class="docutils literal"><span class="pre">cm</span></tt><a class="headerlink" href="#deploying-virtual-cluster-with-cloudmesh-cm" title="Permalink to this headline">¶</a></h1>
<p>To support the creation of a virtual compute cluster (e.g. Hadoop or
Slurm) on Cloudmesh, <tt class="docutils literal"><span class="pre">cluster</span></tt> command is available to start,
configure, manage or update a number of virtual machines.</p>
<div class="section" id="preparation">
<h2>Preparation<a class="headerlink" href="#preparation" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">cluster</span></tt> command is available in the cloudmesh shell. There are
certain steps to make sure you are all set to deploy a new cluster. You
can SKIP these steps if you have configured Cloudmesh previously.</p>
<div class="section" id="cloud-activation">
<h3>Cloud Activation<a class="headerlink" href="#cloud-activation" title="Permalink to this headline">¶</a></h3>
<p>Before starting a cluster, please make sure you activate a cloud:</p>
<div class="code python highlight-python"><div class="highlight"><pre>cm &quot;cloud on india&quot;
</pre></div>
</div>
<p>Activation however does not select the cloud as the default cloud to
start virtual machines. This can be achieved by the select command.</p>
<div class="code python highlight-python"><div class="highlight"><pre>cm &quot;cloud select india&quot;
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre>cm &quot;default cloud india&quot;
</pre></div>
</div>
</div>
<div class="section" id="default-key-pair">
<h3>Default Key Pair<a class="headerlink" href="#default-key-pair" title="Permalink to this headline">¶</a></h3>
<p>To gain access to a virtual cluster, you need a key registered on
OpenStack. If you don’t have a default keypair, you need to set or need
to specify which keypair you are going to use for the virtual cluster.</p>
<div class="code python highlight-python"><div class="highlight"><pre>cm &quot;key default [username]-india-key&quot;
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><strong>REPLACE [username] with your portal id, e.g. albert</strong></p>
</div>
</div>
<div class="section" id="default-vm-image">
<h3>Default VM Image<a class="headerlink" href="#default-vm-image" title="Permalink to this headline">¶</a></h3>
<p>You need that a default VM image is configured. We use ubuntu-14.04
image as a default in this tutorial.</p>
<div class="code python highlight-python"><div class="highlight"><pre>cm &quot;default image --name=futuresystems/ubuntu-14.04&quot;
</pre></div>
</div>
</div>
<div class="section" id="default-flavor">
<h3>Default Flavor<a class="headerlink" href="#default-flavor" title="Permalink to this headline">¶</a></h3>
<p>You need that a default flavor is configured. Make sure that the flavor
works with the default image. Some images require a larger size of a
flavor rather than a smaller one e.g. m1.small or m1.tiny.</p>
<div class="code python highlight-python"><div class="highlight"><pre>cm &quot;default flavor --name=m1.small&quot;
</pre></div>
</div>
</div>
</div>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<div class="section" id="create-a-virtual-cluster-with-cluster-command">
<h3>Create a Virtual Cluster with <tt class="docutils literal"><span class="pre">cluster</span></tt> command<a class="headerlink" href="#create-a-virtual-cluster-with-cluster-command" title="Permalink to this headline">¶</a></h3>
<p>Run ‘cluster create’ with the following parameters:</p>
<p>name cluster name &#8211;count specify amount of VMs in the cluster &#8211;ln
login name for VMs, e.g. ubuntu</p>
</div>
<div class="section" id="create-a-virtual-cluster-with-3-virtual-machines">
<h3>Create a Virtual Cluster with 3 virtual machines<a class="headerlink" href="#create-a-virtual-cluster-with-3-virtual-machines" title="Permalink to this headline">¶</a></h3>
<p>Let us create a cluster with the group name cluster_tutorial that
contains 3 virtual machines.</p>
<div class="code python highlight-python"><div class="highlight"><pre>cm &quot;cluster create cluster_tutorial1 --count=3 --ln=ubuntu&quot;
</pre></div>
</div>
<p>You may also provide a flavor or a VM image in the command. For example,
creating a virtual cluster on Ubuntu 14.04 image with a small flavor:</p>
<div class="code python highlight-python"><div class="highlight"><pre>cm &quot;cluster create cluster_tutorial2 --count=3 --ln=ubuntu --cloud=india --flavor=m1.small --image=futuresystems/ubuntu-14.04&quot;
</pre></div>
</div>
</div>
<div class="section" id="check-status-of-a-virtual-cluster">
<h3>Check Status of a Virtual Cluster<a class="headerlink" href="#check-status-of-a-virtual-cluster" title="Permalink to this headline">¶</a></h3>
<p>Use <tt class="docutils literal"><span class="pre">vm`</span> <span class="pre">command</span> <span class="pre">with</span></tt>&#8211;group`` parameter to check the status.</p>
<div class="code python highlight-python"><div class="highlight"><pre>cm &quot;vm list --refresh --group=cluster_tutorial1&quot;
</pre></div>
</div>
</div>
<div class="section" id="terminate-a-virtual-cluster">
<h3>Terminate a Virtual Cluster<a class="headerlink" href="#terminate-a-virtual-cluster" title="Permalink to this headline">¶</a></h3>
<p>Delete a virtual cluster with the name.</p>
<div class="code python highlight-python"><div class="highlight"><pre>cm &quot;cluster remove cluster_tutorial1&quot;
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre>cm &quot;cluster remove cluster_tutorial2&quot;
</pre></div>
</div>
</div>
<div class="section" id="cluster-help-message">
<h3>Cluster Help Message<a class="headerlink" href="#cluster-help-message" title="Permalink to this headline">¶</a></h3>
<p>Usage: cluster list [&#8211;format=FORMAT] cluster create [&#8211;count=][&#8211;ln=]
[&#8211;cloud=][&#8211;image=|&#8211;imageid=] [&#8211;flavor=|&#8211;flavorid=][&#8211;force]
cluster show [&#8211;format=FORMAT] [&#8211;column=COLUMN] [&#8211;detail] cluster
remove [&#8211;grouponly]</p>
<p>Description: Cluster Management</p>
<div class="highlight-python"><div class="highlight"><pre>cluster list
    list the clusters

cluster create &lt;name&gt; --count=&lt;count&gt; --ln=&lt;LoginName&gt; [options...]
    Start a cluster of VMs, and each of them can log into all others.
    CAUTION: you sould do some default setting before using this command:
    1. select cloud to work on, e.g. cloud select india
    2. activate the cloud, e.g. cloud on india
    3. set the default key to start VMs, e.g. key default [NAME]
    4. set the start name of VMs, which is prefix and index, e.g. label --prefix=test --id=1
    5. set image of VMs, e.g. default image
    6. set flavor of VMs, e.g. default flavor
    Also, it is better to choose a unused group name

cluster show &lt;name&gt;
    show the detailed information about the cluster VMs

cluster remove &lt;name&gt; [--grouponly]
    remove the cluster and its VMs, if you want to remove the cluster(group name)
    without removing the VMs, use --grouponly flag
</pre></div>
</div>
<p>Arguments: cluster name or group name</p>
<p>Options: &#8211;count= give the number of VMs to add into the cluster &#8211;ln=
give a login name for the VMs, e.g. ubuntu &#8211;cloud= give a cloud to work
on &#8211;flavor= give the name of the flavor &#8211;flavorid= give the id of the
flavor &#8211;image= give the name of the image &#8211;imageid= give the id of the
image &#8211;force if a group exists and there are VMs in it, the program
will ask user to proceed or not, use this flag to respond yes as
default(if there are VMs in the group before creating this cluster, the
program will include the exist VMs into the cluster) &#8211;grouponly remove
the group only without removing the VMs, otherwise cluster remove
command will remove all the VMs of this cluster FORMAT output format:
table, json, csv COLUMN customize what information to display, for
example: &#8211;column=status,addresses prints the columns status and
addresses &#8211;detail for table print format, a brief version is used as
default, use this flag to print detailed table</p>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="_cm-group.html" class="btn btn-neutral float-right" title="Managing multiple VMs with Cloudmesh cm"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="_cm-limits.html" class="btn btn-neutral" title="Metric Commands in Cloudmesh cm"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, myCloudmesh.org/learning.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'Learning',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>